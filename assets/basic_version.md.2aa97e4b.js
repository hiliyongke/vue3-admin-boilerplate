import{_ as s,c as a,o as n,a as o}from"./app.c4e3427c.js";const A=JSON.parse('{"title":"自动化版本","description":"","frontmatter":{},"headers":[{"level":2,"title":"版本管理","slug":"版本管理","link":"#版本管理","children":[]},{"level":2,"title":"使用 🌟","slug":"使用-🌟","link":"#使用-🌟","children":[]}],"relativePath":"basic/version.md"}'),e={name:"basic/version.md"},l=o(`<h1 id="自动化版本" tabindex="-1">自动化版本 <a class="header-anchor" href="#自动化版本" aria-hidden="true">#</a></h1><p>规范化的提交信息除了能很好描述项目的修改，还有一个很好的作用就是能根据提交记录来生成 <code>CHANGELOG.MD</code> 和自动生成版本号等功能。</p><h2 id="版本管理" tabindex="-1">版本管理 <a class="header-anchor" href="#版本管理" aria-hidden="true">#</a></h2><p><strong>standard-version</strong></p><p><code>standard-version</code> 是一款遵循语义化版本<a href="https://semver.org/" target="_blank" rel="noreferrer">semver</a>和 <a href="https://www.conventionalcommits.org/en/v1.0.0/" target="_blank" rel="noreferrer">commit message</a> 标准规范 的版本和 <code>changlog</code> 自动化工具</p><p><strong>主要功能：</strong></p><ul><li>自动修改最新版本号，可以是 <code>package.json</code> 或者自定义一个文件</li><li>读取最新版本号，创建一个最新的 <code>git tag</code></li><li>根据提交信息，生成 <code>CHANGELOG.md</code></li><li>创建一个新提交包括 <code>CHANGELOG.md</code> 和 <code>package.json</code></li></ul><p><strong>语义化版本控制(SemVer)</strong></p><p>先简单了解下什么是语义化的版本控制，其是由 <code>GitHub</code> 发起的一份用于规范版本号递增的规则，</p><p><strong>主版本号.次版本号.修订号，版本号递增规则如下：</strong></p><ul><li>主版本号(<code>major</code>)：向后不兼容的更改，增加主版本，理解为新的版本迭代, 例: v0.0.1 -&gt; v1.0.0</li><li>次版本号(<code>minor</code>)：向下兼容的功能性新增， 理解为 <code>Feature</code> 版本, 例: v0.0.1 -&gt; v0.1.0</li><li>修订号(<code>patch</code>)：向下兼容的问题修正， 理解为 <code>Bug fix</code> 版本, 例: v0.0.1 -&gt; v0.0.2</li></ul><p><strong>先行版本</strong></p><p>先行版本号可以加到“主版本号.次版本号.修订号”的后面，作为延伸。</p><p>当即将发布大版本改动前，但是又不能保证这个版本的功能 100% 正常，这个时候可以发布先行版本：</p><ul><li><code>alpha</code>: 内部版本</li><li><code>beta</code>: 公测版本</li><li><code>rc</code>: 候选版本(Release candiate)</li></ul><p>比如：1.0.0-alpha.0,1.0.0-alpha.1,1.0.0-rc.0,1.0.0-rc.1 等。</p><p><code>standard-version</code> 会根据提交的信息类型来自动更改对应的版本号,如下:</p><ul><li>feat: 次版本(minor) +1</li><li>fix: 修订号(patch) +1</li><li>BREAK CHANGE: 主板号(marjor) +1</li></ul><blockquote><p><code>standard-verstion</code> 生成的 <code>CHANGELOG</code> 只会包含 <code>feat</code>,<code>fix</code>,<code>BREACK-CHANGE</code> 类型的提交记录</p></blockquote><h2 id="使用-🌟" tabindex="-1">使用 🌟 <a class="header-anchor" href="#使用-🌟" aria-hidden="true">#</a></h2><p><code>standard-version</code>已经内置在我们项目中，无须再次配置，可以直接执行即可，以下安装教程在其他项目同样适用。</p><ol><li>安装</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--save-dev</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">standard-version</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">semver</span></span>
<span class="line"></span></code></pre></div><ol start="2"><li>添加<code>npm script</code></li></ol><div class="language-json"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C792EA;">scripts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">release</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">node --loader ts-node/esm --no-warnings --experimental-json-modules ./build/release.mjs</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><ol start="3"><li>执行：</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">run</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">release</span></span>
<span class="line"></span></code></pre></div><p>或者你想指定发行版本号：</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;"> 当前tag版本v1.</span><span style="color:#F78C6C;">0.0</span><span style="color:#A6ACCD;">，请选择要发布的版本号: </span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">Use</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">arrow</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">keys</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">❯</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">patch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">1.0.1</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">minor</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">1.1.0</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">major</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">2.0.0</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">custom</span></span>
<span class="line"></span></code></pre></div><p>还有更多配置功能自行查阅<a href="https://github.com/conventional-changelog/standard-version" target="_blank" rel="noreferrer">官方文档</a></p>`,30),p=[l];function c(t,r,i,d,C,D){return n(),a("div",null,p)}const F=s(e,[["render",c]]);export{A as __pageData,F as default};
