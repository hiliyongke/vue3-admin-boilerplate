# è‡ªåŠ¨åŒ–ç‰ˆæœ¬

è§„èŒƒåŒ–çš„æäº¤ä¿¡æ¯é™¤äº†èƒ½å¾ˆå¥½æè¿°é¡¹ç›®çš„ä¿®æ”¹ï¼Œè¿˜æœ‰ä¸€ä¸ªå¾ˆå¥½çš„ä½œç”¨å°±æ˜¯èƒ½æ ¹æ®æäº¤è®°å½•æ¥ç”Ÿæˆ `CHANGELOG.MD` å’Œè‡ªåŠ¨ç”Ÿæˆç‰ˆæœ¬å·ç­‰åŠŸèƒ½ã€‚

## ç‰ˆæœ¬ç®¡ç†

**standard-version**

`standard-version` æ˜¯ä¸€æ¬¾éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬[semver](https://semver.org/)å’Œ [commit message](https://www.conventionalcommits.org/en/v1.0.0/) æ ‡å‡†è§„èŒƒ çš„ç‰ˆæœ¬å’Œ `changlog` è‡ªåŠ¨åŒ–å·¥å…·

**ä¸»è¦åŠŸèƒ½ï¼š**

- è‡ªåŠ¨ä¿®æ”¹æœ€æ–°ç‰ˆæœ¬å·ï¼Œå¯ä»¥æ˜¯ `package.json` æˆ–è€…è‡ªå®šä¹‰ä¸€ä¸ªæ–‡ä»¶
- è¯»å–æœ€æ–°ç‰ˆæœ¬å·ï¼Œåˆ›å»ºä¸€ä¸ªæœ€æ–°çš„ `git tag`
- æ ¹æ®æäº¤ä¿¡æ¯ï¼Œç”Ÿæˆ `CHANGELOG.md`
- åˆ›å»ºä¸€ä¸ªæ–°æäº¤åŒ…æ‹¬ `CHANGELOG.md` å’Œ `package.json`

**è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶(SemVer)**

å…ˆç®€å•äº†è§£ä¸‹ä»€ä¹ˆæ˜¯è¯­ä¹‰åŒ–çš„ç‰ˆæœ¬æ§åˆ¶ï¼Œå…¶æ˜¯ç”± `GitHub` å‘èµ·çš„ä¸€ä»½ç”¨äºè§„èŒƒç‰ˆæœ¬å·é€’å¢çš„è§„åˆ™ï¼Œ

**ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·ï¼Œç‰ˆæœ¬å·é€’å¢è§„åˆ™å¦‚ä¸‹ï¼š**

- ä¸»ç‰ˆæœ¬å·(`major`)ï¼šå‘åä¸å…¼å®¹çš„æ›´æ”¹ï¼Œå¢åŠ ä¸»ç‰ˆæœ¬ï¼Œç†è§£ä¸ºæ–°çš„ç‰ˆæœ¬è¿­ä»£, ä¾‹: v0.0.1 -> v1.0.0
- æ¬¡ç‰ˆæœ¬å·(`minor`)ï¼šå‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ€§æ–°å¢ï¼Œ ç†è§£ä¸º `Feature` ç‰ˆæœ¬, ä¾‹: v0.0.1 -> v0.1.0
- ä¿®è®¢å·(`patch`)ï¼šå‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£ï¼Œ ç†è§£ä¸º `Bug fix` ç‰ˆæœ¬, ä¾‹: v0.0.1 -> v0.0.2

**å…ˆè¡Œç‰ˆæœ¬**

å…ˆè¡Œç‰ˆæœ¬å·å¯ä»¥åŠ åˆ°â€œä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·â€çš„åé¢ï¼Œä½œä¸ºå»¶ä¼¸ã€‚

å½“å³å°†å‘å¸ƒå¤§ç‰ˆæœ¬æ”¹åŠ¨å‰ï¼Œä½†æ˜¯åˆä¸èƒ½ä¿è¯è¿™ä¸ªç‰ˆæœ¬çš„åŠŸèƒ½ 100% æ­£å¸¸ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥å‘å¸ƒå…ˆè¡Œç‰ˆæœ¬ï¼š

- `alpha`: å†…éƒ¨ç‰ˆæœ¬
- `beta`: å…¬æµ‹ç‰ˆæœ¬
- `rc`: å€™é€‰ç‰ˆæœ¬(Release candiate)

æ¯”å¦‚ï¼š1.0.0-alpha.0,1.0.0-alpha.1,1.0.0-rc.0,1.0.0-rc.1 ç­‰ã€‚

`standard-version` ä¼šæ ¹æ®æäº¤çš„ä¿¡æ¯ç±»å‹æ¥è‡ªåŠ¨æ›´æ”¹å¯¹åº”çš„ç‰ˆæœ¬å·,å¦‚ä¸‹:

- feat: æ¬¡ç‰ˆæœ¬(minor) +1
- fix: ä¿®è®¢å·(patch) +1
- BREAK CHANGE: ä¸»æ¿å·(marjor) +1

> `standard-verstion` ç”Ÿæˆçš„ `CHANGELOG` åªä¼šåŒ…å« `feat`,`fix`,`BREACK-CHANGE` ç±»å‹çš„æäº¤è®°å½•

## ä½¿ç”¨ ğŸŒŸ

`standard-version`å·²ç»å†…ç½®åœ¨æˆ‘ä»¬é¡¹ç›®ä¸­ï¼Œæ— é¡»å†æ¬¡é…ç½®ï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œå³å¯ï¼Œä»¥ä¸‹å®‰è£…æ•™ç¨‹åœ¨å…¶ä»–é¡¹ç›®åŒæ ·é€‚ç”¨ã€‚

1. å®‰è£…

```bash
npm i --save-dev standard-version semver
```

2. æ·»åŠ `npm script`

```json
{
  "scripts": {
    "release": "node --loader ts-node/esm --no-warnings --experimental-json-modules ./build/release.mjs"
  }
}
```

3. æ‰§è¡Œï¼š

```bash
npm run release
```

æˆ–è€…ä½ æƒ³æŒ‡å®šå‘è¡Œç‰ˆæœ¬å·ï¼š

```bash
? å½“å‰tagç‰ˆæœ¬v1.0.0ï¼Œè¯·é€‰æ‹©è¦å‘å¸ƒçš„ç‰ˆæœ¬å·: (Use arrow keys)
â¯ patch (1.0.1)
  minor (1.1.0)
  major (2.0.0)
  custom
```

è¿˜æœ‰æ›´å¤šé…ç½®åŠŸèƒ½è‡ªè¡ŒæŸ¥é˜…[å®˜æ–¹æ–‡æ¡£](https://github.com/conventional-changelog/standard-version)
