{"version":3,"file":"index-3f1f82c6.js","sources":["../../../src/components/pdf-preview/index.vue"],"sourcesContent":["<script lang=\"ts\">\nimport { defineComponent } from 'vue'\nexport default defineComponent({\n  name: 'PdfPreview',\n})\n</script>\n<template>\n  <div class=\"pdf-preview\">\n    <div class=\"page-tool\">\n      <div\n        class=\"page-tool-item\"\n        @click=\"lastPage\"\n      >\n        上一页\n      </div>\n      <div\n        class=\"page-tool-item\"\n        @click=\"nextPage\"\n      >\n        下一页\n      </div>\n      <div class=\"page-tool-item\">{{ state.pageNum }}/{{ state.numPages }}</div>\n      <div\n        class=\"page-tool-item\"\n        @click=\"pageZoomOut\"\n      >\n        放大\n      </div>\n      <div\n        class=\"page-tool-item\"\n        @click=\"pageZoomIn\"\n      >\n        缩小\n      </div>\n    </div>\n    <div class=\"pdf-wrap\">\n      <vue-pdf-embed\n        :source=\"state.source\"\n        :style=\"scale\"\n        class=\"vue-pdf-embed\"\n        :page=\"state.pageNum\"\n      />\n    </div>\n  </div>\n</template>\n<script setup lang=\"ts\" name=\"PdfPreview\">\nimport { reactive, onMounted, computed } from 'vue';\nimport VuePdfEmbed from 'vue-pdf-embed';\nimport { createLoadingTask } from 'vue3-pdfjs/esm'; // 获得总页数\n\nconst props = defineProps({\n  pdfUrl: {\n    type: String,\n    required: true\n  }\n});\nconst state = reactive({\n  source: props.pdfUrl,\n  pageNum: 1,\n  scale: 1, // 缩放比例\n  numPages: 0 // 总页数\n});\n\nonMounted(() => {\n  const loadingTask = createLoadingTask(state.source);\n  loadingTask.promise.then((pdf: { numPages: number }) => {\n    state.numPages = pdf.numPages;\n  });\n});\n\nconst scale = computed(() => `transform:scale(${state.scale})`);\nfunction lastPage() {\n  if (state.pageNum > 1) {\n    state.pageNum -= 1;\n  }\n}\nfunction nextPage() {\n  if (state.pageNum < state.numPages) {\n    state.pageNum += 1;\n  }\n}\nfunction pageZoomOut() {\n  if (state.scale < 2) {\n    state.scale += 0.1;\n  }\n}\nfunction pageZoomIn() {\n  if (state.scale > 1) {\n    state.scale -= 0.1;\n  }\n}\n</script>\n<style lang=\"css\" scoped>\n.pdf-preview {\n  height: 100vh;\n  padding: 20px 0;\n  background-color: #e9e9e9;\n  box-sizing: border-box;\n}\n.pdf-wrap {\n  overflow-y: auto;\n}\n.vue-pdf-embed {\n  width: 100%;\n  margin: 10px auto;\n  text-align: center;\n  border: 1px solid #e5e5e5;\n  box-sizing: border-box;\n}\n.page-tool {\n  position: fixed;\n  top: 115px;\n  right: 0;\n  z-index: 100;\n  display: flex;\n  padding-right: 15px;\n  padding-left: 15px;\n  color: white;\n  cursor: pointer;\n  background: rgb(66, 66, 66);\n  border-radius: 20px;\n  align-items: center;\n  justify-content: center;\n}\n.page-tool-item {\n  padding: 8px 15px;\n  padding-left: 10px;\n  cursor: pointer;\n}\n</style>\n"],"names":["__default__","defineComponent","name","state","reactive","source","pdfUrl","pageNum","scale","numPages","onMounted","createLoadingTask","promise","then","pdf","computed","lastPage","nextPage","pageZoomOut","pageZoomIn"],"mappings":"ojBAEAA,EAAAC,EAAA,CAA+BC,KAAA,2NAsD/BC,EAAAC,EAAA,CAAuBC,SAAAC,OACPC,QAAA,EACLC,MAAA,EACFC,SAAA,IAITC,EAAA,KACEC,EAAAR,EAAAE,QACAO,QAAAC,KAAAC,IACEX,EAAAM,SAAAK,EAAAL,aAIJ,MAAAD,EAAAO,EAAA,IAAA,mBAAAZ,EAAAK,UACA,SAAAQ,IACEb,EAAAI,QAAA,IACEJ,EAAAI,SAAA,GAGJ,SAAAU,IACEd,EAAAI,QAAAJ,EAAAM,WACEN,EAAAI,SAAA,GAGJ,SAAAW,IACEf,EAAAK,MAAA,IACEL,EAAAK,OAAA,IAGJ,SAAAW,IACEhB,EAAAK,MAAA,IACEL,EAAAK,OAAA"}