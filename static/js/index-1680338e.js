var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,i=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&o(e,t,a[t]);if(l)for(var t of l(a))n.call(a,t)&&o(e,t,a[t]);return e},r=(e,l)=>a(e,t(l));import{d as u,g as c,k as d,h as p,c as y,y as v,x as f,u as h,M as m,bL as b,a_ as g,o as w,a as k,e as x,t as T,K as _,c4 as P,s as C,L as j,H as E,U as I,aW as O,bO as K,bQ as N}from"./.pnpm-e6c61d32.js";import{C as U,a as S,b as L}from"./index-3f67debd.js";import{T as M}from"./index-1c78b78e.js";import{g as A}from"./list-066b90e9.js";import{b as D,p as G,_ as V}from"./index-4900769b.js";const z=[{colKey:"row-select",type:"multiple",width:64,fixed:"left"},{title:"合同名称",align:"left",width:300,colKey:"name",fixed:"left"},{title:"合同状态",colKey:"status",width:200,cell:{col:"status"}},{title:"合同编号",width:200,ellipsis:!0,colKey:"no"},{title:"合同类型",width:200,ellipsis:!0,colKey:"contractType"},{title:"合同收付类型",width:200,ellipsis:!0,colKey:"paymentType"},{title:"合同金额 (元)",width:200,ellipsis:!0,colKey:"amount"},{align:"left",fixed:"right",width:200,colKey:"op",title:"操作"}],B={class:"left-operation-container"},F={key:0,class:"selected-count"},H={class:"search-input"},R={key:0},X={key:1},$={key:2},q={key:0,class:"payment-col"},Q={key:1,class:"payment-col"},W=["onClick"],Y=V(u(r(i({},{name:"ListBase"}),{setup(e){const a=D(),t=c([]),l=c({defaultPageSize:20,total:100,defaultCurrent:1}),s=c(""),n=c(!1),o=()=>{return e=this,a=null,s=function*(){n.value=!0;try{const{list:e}=yield A();t.value=e,l.value=r(i({},l.value),{total:e.length})}catch(e){}finally{n.value=!1}},new Promise((t,l)=>{var n=e=>{try{i(s.next(e))}catch(a){l(a)}},o=e=>{try{i(s.throw(e))}catch(a){l(a)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(n,o);i((s=s.apply(e,a)).next())});var e,a,s},u=c(-1),V=d(()=>{if(u.value>-1){const{name:e}=t.value[u.value];return`删除后，${e}的所有合同信息将被清空，且无法恢复`}return""});p(()=>{o()});const Y=c(!1),J=c([1,2]),Z=j(),ee=()=>{u.value=-1},ae=()=>{t.value.splice(u.value,1),l.value.total=t.value.length;const e=J.value.indexOf(u.value);e>-1&&J.value.splice(e,1),Y.value=!1,m.success("删除成功"),ee()},te=()=>{ee()},le=e=>{J.value=e},se=(e,a)=>{},ne=(e,a)=>{},oe=()=>{Z.push("/form/base")},ie=d(()=>a.isUseTabsRouter?48:0),re=()=>document.querySelector(`.${G}-layout`);return(e,a)=>{const o=E,i=I,r=O,c=K,d=N,p=b,m=g;return w(),y("div",null,[v(p,{class:"list-card-container"},{default:f(()=>[v(r,{justify:"space-between"},{default:f(()=>[k("div",B,[v(o,{onClick:oe},{default:f(()=>[x("新建合同")]),_:1}),v(o,{variant:"base",theme:"default",disabled:!J.value.length},{default:f(()=>[x(" 导出合同 ")]),_:1},8,["disabled"]),J.value.length?(w(),y("p",F," 已选"+T(J.value.length)+"项 ",1)):_("",!0)]),k("div",H,[v(i,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),placeholder:"请输入你需要搜索的内容",clearable:""},{"suffix-icon":f(()=>[v(h(P),{size:"20px"})]),_:1},8,["modelValue"])])]),_:1}),v(d,{data:t.value,columns:h(z),"row-key":"index","vertical-align":"top",hover:!0,pagination:l.value,"selected-row-keys":J.value,loading:n.value,"header-affixed-top":{offsetTop:h(ie),container:re},onPageChange:se,onChange:ne,onSelectChange:le},{status:f(({row:e})=>[e.status===h(U).FAIL?(w(),C(c,{key:0,theme:"danger",variant:"light"},{default:f(()=>[x(" 审核失败 ")]),_:1})):_("",!0),e.status===h(U).AUDIT_PENDING?(w(),C(c,{key:1,theme:"warning",variant:"light"},{default:f(()=>[x(" 待审核 ")]),_:1})):_("",!0),e.status===h(U).EXEC_PENDING?(w(),C(c,{key:2,theme:"warning",variant:"light"},{default:f(()=>[x(" 待履行 ")]),_:1})):_("",!0),e.status===h(U).EXECUTING?(w(),C(c,{key:3,theme:"success",variant:"light"},{default:f(()=>[x(" 履行中 ")]),_:1})):_("",!0),e.status===h(U).FINISH?(w(),C(c,{key:4,theme:"success",variant:"light"},{default:f(()=>[x(" 已完成 ")]),_:1})):_("",!0)]),contractType:f(({row:e})=>[e.contractType===h(S).MAIN?(w(),y("p",R,"审核失败")):_("",!0),e.contractType===h(S).SUB?(w(),y("p",X,"待审核")):_("",!0),e.contractType===h(S).SUPPLEMENT?(w(),y("p",$,"待履行")):_("",!0)]),paymentType:f(({row:e})=>[e.paymentType===h(L).PAYMENT?(w(),y("div",q,[x(" 付款 "),v(M,{class:"dashboard-item-trend",type:"up"})])):_("",!0),e.paymentType===h(L).RECEIPT?(w(),y("div",Q,[x(" 收款 "),v(M,{class:"dashboard-item-trend",type:"down"})])):_("",!0)]),op:f(e=>[k("a",{class:"t-button-link",onClick:a[1]||(a[1]=e=>{Z.push("/detail/base")})}," 详情 "),k("a",{class:"t-button-link",onClick:a=>{return t=e,u.value=t.rowIndex,void(Y.value=!0);var t}}," 删除 ",8,W)]),_:1},8,["data","columns","pagination","selected-row-keys","loading","header-affixed-top"])]),_:1}),v(m,{visible:Y.value,"onUpdate:visible":a[2]||(a[2]=e=>Y.value=e),header:"确认删除当前所选合同？",body:h(V),"on-cancel":te,onConfirm:ae},null,8,["visible","body"])])}}})),[["__scopeId","data-v-5f759bd4"]]);export{Y as default};
//# sourceMappingURL=index-1680338e.js.map
