var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,i=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&n(e,t,a[t]);if(l)for(var t of l(a))o.call(a,t)&&n(e,t,a[t]);return e};import{T as r}from"./index-da568b50.js";import{g as u}from"./list-d98a9e93.js";import{b as p}from"./user-91c86330.js";import{p as d}from"./index-cf7ca57d.js";import{c,d as m,C as y,a as f,b as v}from"./index-3f67debd.js";import{d as h,g as b,k as g,h as _,o as w,c as k,l as x,x as T,u as P,e as j,a as C,m as I,s as E,M as V,I as O,a6 as U,Y as N,_ as K,a2 as S,G as A,a7 as D,bO as G,bQ as M,a9 as R}from"./.pnpm-23496a1a.js";import{_ as L}from"./_plugin-vue_export-helper-1b428a4d.js";const B={class:"list-common-table"},F={class:"table-container"},Q={key:0},W={key:1},X={key:2},Y={key:0,class:"payment-col"},$={key:1,class:"payment-col"},q=["onClick"],z=["onClick"],H=L(h({__name:"common-table",setup(e){const l=p(),s=[{title:"合同名称",fixed:"left",width:200,ellipsis:!0,align:"left",colKey:"name"},{title:"合同状态",colKey:"status",width:200,cell:{col:"status"}},{title:"合同编号",width:200,ellipsis:!0,colKey:"no"},{title:"合同类型",width:200,ellipsis:!0,colKey:"contractType"},{title:"合同收付类型",width:200,ellipsis:!0,colKey:"paymentType"},{title:"合同金额 (元)",width:200,ellipsis:!0,colKey:"amount"},{align:"left",fixed:"right",width:200,colKey:"op",title:"操作"}],o=b(i({},{name:"",no:void 0,status:void 0,type:""})),n=b({defaultPageSize:20,total:100,defaultCurrent:1}),h=b(!1),L=b([]),H=b(!1),J=()=>{return e=this,l=null,s=function*(){H.value=!0;try{const{list:s}=yield u();L.value=s,n.value=(e=i({},n.value),l={total:s.length},a(e,t(l)))}catch(s){}finally{H.value=!1}var e,l},new Promise((a,t)=>{var o=e=>{try{i(s.next(e))}catch(a){t(a)}},n=e=>{try{i(s.throw(e))}catch(a){t(a)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(o,n);i((s=s.apply(e,l)).next())});var e,l,s},Z=b(-1),ee=g(()=>{if(Z.value>-1){const{name:e}=L.value[Z.value];return`删除后，${e}的所有合同信息将被清空，且无法恢复`}return""}),ae=()=>{Z.value=-1},te=()=>{L.value.splice(Z.value,1),n.value.total=L.value.length,h.value=!1,V.success("删除成功"),ae()},le=()=>{ae()};_(()=>{J()});const se=e=>{},oe=e=>{},ne=(e,a)=>{},ie=(e,a)=>{},re=g(()=>l.isUseTabsRouter?48:0),ue=()=>document.querySelector(`.${d}-layout`);return(e,a)=>{const t=O,l=U,i=N,u=K,p=S,d=A,b=D,g=G,_=M,V=R;return w(),k("div",B,[x(b,{ref:"form",data:o.value,"label-width":80,colon:"",style:{marginBottom:"8px"},onReset:se,onSubmit:oe},{default:T(()=>[x(p,null,{default:T(()=>[x(i,{span:10},{default:T(()=>[x(p,{gutter:[16,24]},{default:T(()=>[x(i,{span:4},{default:T(()=>[x(l,{label:"合同名称",name:"name"},{default:T(()=>[x(t,{modelValue:o.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>o.value.name=e),class:"form-item-content",type:"search",placeholder:"请输入合同名称",style:{minWidth:"134px"}},null,8,["modelValue"])]),_:1})]),_:1}),x(i,{span:4},{default:T(()=>[x(l,{label:"合同状态",name:"status"},{default:T(()=>[x(u,{modelValue:o.value.status,"onUpdate:modelValue":a[1]||(a[1]=e=>o.value.status=e),class:"form-item-content",options:P(c),placeholder:"请选择合同状态"},null,8,["modelValue","options"])]),_:1})]),_:1}),x(i,{span:4},{default:T(()=>[x(l,{label:"合同编号",name:"no"},{default:T(()=>[x(t,{modelValue:o.value.no,"onUpdate:modelValue":a[2]||(a[2]=e=>o.value.no=e),class:"form-item-content",placeholder:"请输入合同编号",style:{minWidth:"134px"}},null,8,["modelValue"])]),_:1})]),_:1}),x(i,{span:4},{default:T(()=>[x(l,{label:"合同类型",name:"type"},{default:T(()=>[x(u,{modelValue:o.value.type,"onUpdate:modelValue":a[3]||(a[3]=e=>o.value.type=e),style:{display:"inline-block"},class:"form-item-content",options:P(m),placeholder:"请选择合同类型"},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:1})]),_:1}),x(i,{span:2,class:"operation-container"},{default:T(()=>[x(d,{theme:"primary",type:"submit",style:{marginLeft:"8px"}},{default:T(()=>[j(" 查询 ")]),_:1}),x(d,{type:"reset",variant:"base",theme:"default"},{default:T(()=>[j(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["data"]),C("div",F,[x(_,{data:L.value,columns:s,"row-key":"index","vertical-align":"top",hover:!0,pagination:n.value,loading:H.value,"header-affixed-top":{offsetTop:P(re),container:ue},onPageChange:ne,onChange:ie},{status:T(({row:e})=>[e.status===P(y).FAIL?(w(),I(g,{key:0,theme:"danger",variant:"light"},{default:T(()=>[j(" 审核失败 ")]),_:1})):E("",!0),e.status===P(y).AUDIT_PENDING?(w(),I(g,{key:1,theme:"warning",variant:"light"},{default:T(()=>[j(" 待审核 ")]),_:1})):E("",!0),e.status===P(y).EXEC_PENDING?(w(),I(g,{key:2,theme:"warning",variant:"light"},{default:T(()=>[j(" 待履行 ")]),_:1})):E("",!0),e.status===P(y).EXECUTING?(w(),I(g,{key:3,theme:"success",variant:"light"},{default:T(()=>[j(" 履行中 ")]),_:1})):E("",!0),e.status===P(y).FINISH?(w(),I(g,{key:4,theme:"success",variant:"light"},{default:T(()=>[j(" 已完成 ")]),_:1})):E("",!0)]),contractType:T(({row:e})=>[e.contractType===P(f).MAIN?(w(),k("p",Q,"审核失败")):E("",!0),e.contractType===P(f).SUB?(w(),k("p",W,"待审核")):E("",!0),e.contractType===P(f).SUPPLEMENT?(w(),k("p",X,"待履行")):E("",!0)]),paymentType:T(({row:e})=>[e.paymentType===P(v).PAYMENT?(w(),k("p",Y,[j(" 付款 "),x(r,{class:"dashboard-item-trend",type:"up"})])):E("",!0),e.paymentType===P(v).RECEIPT?(w(),k("p",$,[j(" 收款 "),x(r,{class:"dashboard-item-trend",type:"down"})])):E("",!0)]),op:T(e=>[C("a",{class:"t-button-link",onClick:e=>{}}," 管理 ",8,q),C("a",{class:"t-button-link",onClick:a=>(({row:e})=>{Z.value=e.rowIndex,h.value=!0})(e)}," 删除 ",8,z)]),_:1},8,["data","pagination","loading","header-affixed-top"]),x(V,{visible:h.value,"onUpdate:visible":a[4]||(a[4]=e=>h.value=e),header:"确认删除当前所选合同？",body:P(ee),"on-cancel":le,onConfirm:te},null,8,["visible","body"])])])}}}),[["__scopeId","data-v-967fa402"]]);export{H as C};
//# sourceMappingURL=common-table-866601e8.js.map
