var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,i=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&n(e,t,a[t]);if(l)for(var t of l(a))o.call(a,t)&&n(e,t,a[t]);return e};import{T as r}from"./index-1c78b78e.js";import{g as u}from"./list-066b90e9.js";import{b as d,p,_ as c}from"./index-4900769b.js";import{c as m,d as y,C as f,a as v,b as h}from"./index-3f67debd.js";import{d as b,g,k as _,h as w,o as k,c as x,y as T,x as P,u as C,e as E,a as I,s as V,K as j,M as U,U as O,E as K,aQ as N,aS as S,aW as M,H as A,G as D,bO as G,bQ as L,a_ as R}from"./.pnpm-e6c61d32.js";const W={class:"list-common-table"},B={class:"table-container"},F={key:0},H={key:1},Q={key:2},X={key:0,class:"payment-col"},$={key:1,class:"payment-col"},q=["onClick"],z=["onClick"],Y=c(b({__name:"common-table",setup(e){const l=d(),s=[{title:"合同名称",fixed:"left",width:200,ellipsis:!0,align:"left",colKey:"name"},{title:"合同状态",colKey:"status",width:200,cell:{col:"status"}},{title:"合同编号",width:200,ellipsis:!0,colKey:"no"},{title:"合同类型",width:200,ellipsis:!0,colKey:"contractType"},{title:"合同收付类型",width:200,ellipsis:!0,colKey:"paymentType"},{title:"合同金额 (元)",width:200,ellipsis:!0,colKey:"amount"},{align:"left",fixed:"right",width:200,colKey:"op",title:"操作"}],o=g(i({},{name:"",no:void 0,status:void 0,type:""})),n=g({defaultPageSize:20,total:100,defaultCurrent:1}),c=g(!1),b=g([]),Y=g(!1),J=()=>{return e=this,l=null,s=function*(){Y.value=!0;try{const{list:s}=yield u();b.value=s,n.value=(e=i({},n.value),l={total:s.length},a(e,t(l)))}catch(s){}finally{Y.value=!1}var e,l},new Promise((a,t)=>{var o=e=>{try{i(s.next(e))}catch(a){t(a)}},n=e=>{try{i(s.throw(e))}catch(a){t(a)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(o,n);i((s=s.apply(e,l)).next())});var e,l,s},Z=g(-1),ee=_(()=>{if(Z.value>-1){const{name:e}=b.value[Z.value];return`删除后，${e}的所有合同信息将被清空，且无法恢复`}return""}),ae=()=>{Z.value=-1},te=()=>{b.value.splice(Z.value,1),n.value.total=b.value.length,c.value=!1,U.success("删除成功"),ae()},le=()=>{ae()};w(()=>{J()});const se=e=>{},oe=e=>{},ne=(e,a)=>{},ie=(e,a)=>{},re=_(()=>l.isUseTabsRouter?48:0),ue=()=>document.querySelector(`.${p}-layout`);return(e,a)=>{const t=O,l=K,i=N,u=S,d=M,p=A,g=D,_=G,w=L,U=R;return k(),x("div",W,[T(g,{ref:"form",data:o.value,"label-width":80,colon:"",style:{marginBottom:"8px"},onReset:se,onSubmit:oe},{default:P(()=>[T(d,null,{default:P(()=>[T(i,{span:10},{default:P(()=>[T(d,{gutter:[16,24]},{default:P(()=>[T(i,{span:4},{default:P(()=>[T(l,{label:"合同名称",name:"name"},{default:P(()=>[T(t,{modelValue:o.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>o.value.name=e),class:"form-item-content",type:"search",placeholder:"请输入合同名称",style:{minWidth:"134px"}},null,8,["modelValue"])]),_:1})]),_:1}),T(i,{span:4},{default:P(()=>[T(l,{label:"合同状态",name:"status"},{default:P(()=>[T(u,{modelValue:o.value.status,"onUpdate:modelValue":a[1]||(a[1]=e=>o.value.status=e),class:"form-item-content",options:C(m),placeholder:"请选择合同状态"},null,8,["modelValue","options"])]),_:1})]),_:1}),T(i,{span:4},{default:P(()=>[T(l,{label:"合同编号",name:"no"},{default:P(()=>[T(t,{modelValue:o.value.no,"onUpdate:modelValue":a[2]||(a[2]=e=>o.value.no=e),class:"form-item-content",placeholder:"请输入合同编号",style:{minWidth:"134px"}},null,8,["modelValue"])]),_:1})]),_:1}),T(i,{span:4},{default:P(()=>[T(l,{label:"合同类型",name:"type"},{default:P(()=>[T(u,{modelValue:o.value.type,"onUpdate:modelValue":a[3]||(a[3]=e=>o.value.type=e),style:{display:"inline-block"},class:"form-item-content",options:C(y),placeholder:"请选择合同类型"},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:1})]),_:1}),T(i,{span:2,class:"operation-container"},{default:P(()=>[T(p,{theme:"primary",type:"submit",style:{marginLeft:"8px"}},{default:P(()=>[E(" 查询 ")]),_:1}),T(p,{type:"reset",variant:"base",theme:"default"},{default:P(()=>[E(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["data"]),I("div",B,[T(w,{data:b.value,columns:s,"row-key":"index","vertical-align":"top",hover:!0,pagination:n.value,loading:Y.value,"header-affixed-top":{offsetTop:C(re),container:ue},onPageChange:ne,onChange:ie},{status:P(({row:e})=>[e.status===C(f).FAIL?(k(),V(_,{key:0,theme:"danger",variant:"light"},{default:P(()=>[E(" 审核失败 ")]),_:1})):j("",!0),e.status===C(f).AUDIT_PENDING?(k(),V(_,{key:1,theme:"warning",variant:"light"},{default:P(()=>[E(" 待审核 ")]),_:1})):j("",!0),e.status===C(f).EXEC_PENDING?(k(),V(_,{key:2,theme:"warning",variant:"light"},{default:P(()=>[E(" 待履行 ")]),_:1})):j("",!0),e.status===C(f).EXECUTING?(k(),V(_,{key:3,theme:"success",variant:"light"},{default:P(()=>[E(" 履行中 ")]),_:1})):j("",!0),e.status===C(f).FINISH?(k(),V(_,{key:4,theme:"success",variant:"light"},{default:P(()=>[E(" 已完成 ")]),_:1})):j("",!0)]),contractType:P(({row:e})=>[e.contractType===C(v).MAIN?(k(),x("p",F,"审核失败")):j("",!0),e.contractType===C(v).SUB?(k(),x("p",H,"待审核")):j("",!0),e.contractType===C(v).SUPPLEMENT?(k(),x("p",Q,"待履行")):j("",!0)]),paymentType:P(({row:e})=>[e.paymentType===C(h).PAYMENT?(k(),x("p",X,[E(" 付款 "),T(r,{class:"dashboard-item-trend",type:"up"})])):j("",!0),e.paymentType===C(h).RECEIPT?(k(),x("p",$,[E(" 收款 "),T(r,{class:"dashboard-item-trend",type:"down"})])):j("",!0)]),op:P(e=>[I("a",{class:"t-button-link",onClick:e=>{}}," 管理 ",8,q),I("a",{class:"t-button-link",onClick:a=>(({row:e})=>{Z.value=e.rowIndex,c.value=!0})(e)}," 删除 ",8,z)]),_:1},8,["data","pagination","loading","header-affixed-top"]),T(U,{visible:c.value,"onUpdate:visible":a[4]||(a[4]=e=>c.value=e),header:"确认删除当前所选合同？",body:C(ee),"on-cancel":le,onConfirm:te},null,8,["visible","body"])])])}}}),[["__scopeId","data-v-967fa402"]]);export{Y as C};
//# sourceMappingURL=common-table-c10987d3.js.map
