{"version":3,"file":"index-82b65375.js","sources":["../../../src/pages/form/base/constants.ts","../../../src/pages/form/base/index.vue"],"sourcesContent":["export const FORM_RULES = {\n  name: [{ required: true, message: '请输入合同名称', type: 'error' }],\n  type: [{ required: true, message: '请选择合同类型', type: 'error' }],\n  payment: [{ required: true, message: '请选择合同收付类型', type: 'error' }],\n  amount: [{ required: true, message: '请输入合同金额', type: 'error' }],\n  partyA: [{ required: true, message: '请选择甲方', type: 'error' }],\n  partyB: [{ required: true, message: '请选择乙方', type: 'error' }],\n  signDate: [{ required: true, message: '请选择日期', type: 'error' }],\n  startDate: [{ required: true, message: '请选择日期', type: 'error' }],\n  endDate: [{ required: true, message: '请选择日期', type: 'error' }]\n};\n\nexport const INITIAL_DATA = {\n  name: '',\n  type: '',\n  partyA: '',\n  partyB: '',\n  signDate: '',\n  startDate: '',\n  endDate: '',\n  payment: '1',\n  amount: 0,\n  comment: '',\n  files: []\n};\n\nexport const TYPE_OPTIONS = [\n  { label: '类型A', value: '1' },\n  { label: '类型B', value: '2' },\n  { label: '类型C', value: '3' }\n];\n\nexport const PARTY_A_OPTIONS = [\n  { label: '公司A', value: '1' },\n  { label: '公司B', value: '2' },\n  { label: '公司C', value: '3' }\n];\n\nexport const PARTY_B_OPTIONS = [\n  { label: '公司A', value: '1' },\n  { label: '公司B', value: '2' },\n  { label: '公司C', value: '3' }\n];\n","<template>\n  <t-form\n    ref=\"form\"\n    class=\"base-form\"\n    :data=\"formData\"\n    :rules=\"FORM_RULES\"\n    label-align=\"top\"\n    :label-width=\"100\"\n    @reset=\"onReset\"\n    @submit=\"onSubmit\"\n  >\n    <div class=\"form-basic-container\">\n      <div class=\"form-basic-item\">\n        <div class=\"form-basic-container-title\">合同信息</div>\n        <!-- 表单内容 -->\n\n        <!-- 合同名称,合同类型 -->\n        <t-row\n          class=\"row-gap\"\n          :gutter=\"[16, 24]\"\n        >\n          <t-col :span=\"6\">\n            <t-form-item\n              label=\"合同名称\"\n              name=\"name\"\n            >\n              <t-input\n                v-model=\"formData.name\"\n                :style=\"{ width: '322px' }\"\n                placeholder=\"请输入内容\"\n              />\n            </t-form-item>\n          </t-col>\n          <t-col :span=\"6\">\n            <t-form-item\n              label=\"合同类型\"\n              name=\"type\"\n            >\n              <t-select\n                v-model=\"formData.type\"\n                :style=\"{ width: '322px' }\"\n                placeholder=\"请选择类型\"\n                class=\"demo-select-base\"\n                clearable\n              >\n                <t-option\n                  v-for=\"(item, index) in TYPE_OPTIONS\"\n                  :key=\"index\"\n                  :value=\"item.value\"\n                  :label=\"item.label\"\n                >\n                  {{ item.label }}\n                </t-option>\n              </t-select>\n            </t-form-item>\n          </t-col>\n\n          <!-- 合同收付类型 -->\n          <t-col :span=\"8\">\n            <t-form-item\n              label=\"合同收付类型\"\n              name=\"payment\"\n            >\n              <t-radio-group v-model=\"formData.payment\">\n                <t-radio value=\"1\">收款</t-radio>\n                <t-radio value=\"2\">付款</t-radio>\n              </t-radio-group>\n              <span class=\"space-item\"></span>\n              <div>\n                <t-input\n                  placeholder=\"请输入金额\"\n                  :style=\"{ width: '160px' }\"\n                />\n              </div>\n            </t-form-item>\n          </t-col>\n\n          <t-col :span=\"6\">\n            <t-form-item\n              label=\"甲方\"\n              name=\"partyA\"\n            >\n              <t-select\n                v-model=\"formData.partyA\"\n                :style=\"{ width: '322px' }\"\n                class=\"demo-select-base\"\n                placeholder=\"请选择类型\"\n                clearable\n              >\n                <t-option\n                  v-for=\"(item, index) in PARTY_A_OPTIONS\"\n                  :key=\"index\"\n                  :value=\"item.value\"\n                  :label=\"item.label\"\n                >\n                  {{ item.label }}\n                </t-option>\n              </t-select>\n            </t-form-item>\n          </t-col>\n          <t-col :span=\"6\">\n            <t-form-item\n              label=\"乙方\"\n              name=\"partyB\"\n            >\n              <t-select\n                v-model=\"formData.partyB\"\n                :style=\"{ width: '322px' }\"\n                placeholder=\"请选择类型\"\n                class=\"demo-select-base\"\n                clearable\n              >\n                <t-option\n                  v-for=\"(item, index) in PARTY_B_OPTIONS\"\n                  :key=\"index\"\n                  :value=\"item.value\"\n                  :label=\"item.label\"\n                >\n                  {{ item.label }}\n                </t-option>\n              </t-select>\n            </t-form-item>\n          </t-col>\n          <t-col :span=\"6\">\n            <t-form-item\n              label=\"合同签订日期\"\n              name=\"signDate\"\n            >\n              <t-date-picker\n                v-model=\"formData.signDate\"\n                :style=\"{ width: '322px' }\"\n                theme=\"primary\"\n                mode=\"date\"\n                separator=\"/\"\n              />\n            </t-form-item>\n          </t-col>\n          <t-col :span=\"6\">\n            <t-form-item\n              label=\"合同生效日期\"\n              name=\"startDate\"\n            >\n              <t-date-picker\n                v-model=\"formData.startDate\"\n                :style=\"{ width: '322px' }\"\n                theme=\"primary\"\n                mode=\"date\"\n                separator=\"/\"\n              />\n            </t-form-item>\n          </t-col>\n          <t-col :span=\"6\">\n            <t-form-item\n              label=\"合同结束日期\"\n              name=\"endDate\"\n            >\n              <t-date-picker\n                v-model=\"formData.endDate\"\n                :style=\"{ width: '322px' }\"\n                theme=\"primary\"\n                mode=\"date\"\n                separator=\"/\"\n              />\n            </t-form-item>\n          </t-col>\n          <t-col :span=\"6\">\n            <t-form-item\n              label=\"\"\n              name=\"files\"\n            >\n              <t-upload\n                v-model=\"formData.files\"\n                action=\"https://service-bv448zsw-1257786608.gz.apigw.tencentcs.com/api/upload-demo\"\n                tips=\"请上传pdf文件，大小在60M以内\"\n                :size-limit=\"{ size: 60, unit: 'MB' }\"\n                :format-response=\"formatResponse\"\n                :before-upload=\"beforeUpload\"\n                @fail=\"handleFail\"\n              >\n                <t-button\n                  class=\"form-submit-upload-btn\"\n                  variant=\"outline\"\n                >\n                  上传合同文件\n                </t-button>\n              </t-upload>\n            </t-form-item>\n          </t-col>\n        </t-row>\n\n        <div class=\"form-basic-container-title form-title-gap\">其它信息</div>\n\n        <t-form-item\n          label=\"备注\"\n          name=\"comment\"\n        >\n          <t-textarea\n            v-model=\"formData.comment\"\n            :height=\"124\"\n            placeholder=\"请输入备注\"\n          />\n        </t-form-item>\n        <t-form-item label=\"公证人\">\n          <t-avatar-group>\n            <t-avatar>D</t-avatar>\n            <t-avatar>S</t-avatar>\n            <t-avatar>+</t-avatar>\n          </t-avatar-group>\n        </t-form-item>\n      </div>\n    </div>\n\n    <div class=\"form-submit-container\">\n      <div class=\"form-submit-sub\">\n        <div class=\"form-submit-left\">\n          <t-button\n            theme=\"primary\"\n            class=\"form-submit-confirm\"\n            type=\"submit\"\n          >\n            提交\n          </t-button>\n          <t-button\n            type=\"reset\"\n            class=\"form-submit-cancel\"\n            theme=\"default\"\n            variant=\"base\"\n          >\n            取消\n          </t-button>\n        </div>\n      </div>\n    </div>\n  </t-form>\n</template>\n\n<script lang=\"ts\">\nexport default {\n  name: 'FormBase'\n};\n</script>\n\n<script setup lang=\"ts\">\nimport { MessagePlugin } from 'tdesign-vue-next';\nimport {\n  FORM_RULES,\n  INITIAL_DATA,\n  TYPE_OPTIONS,\n  PARTY_A_OPTIONS,\n  PARTY_B_OPTIONS\n} from './constants';\n\nconst formData = ref({ ...INITIAL_DATA });\n\nconst onReset = () => {\n  MessagePlugin.warning('取消新建');\n};\nconst onSubmit = ({ validateResult }) => {\n  if (validateResult === true) {\n    MessagePlugin.success('新建成功');\n  }\n};\nconst beforeUpload = file => {\n  if (!/\\.(pdf)$/.test(file.name)) {\n    MessagePlugin.warning('请上传pdf文件');\n    return false;\n  }\n  if (file.size > 60 * 1024 * 1024) {\n    MessagePlugin.warning('上传文件不能大于60M');\n    return false;\n  }\n  return true;\n};\nconst handleFail = ({ file }) => {\n  MessagePlugin.error(`文件 ${file.name} 上传失败`);\n};\n// 用于格式化接口响应值，error 会被用于上传失败的提示文字；url 表示文件/图片地址\nconst formatResponse = res => {\n  return { ...res, error: '上传失败，请重试', url: res.url };\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import url('./index.less');\n</style>\n"],"names":["FORM_RULES","name","required","message","type","payment","amount","partyA","partyB","signDate","startDate","endDate","INITIAL_DATA","comment","files","TYPE_OPTIONS","label","value","PARTY_A_OPTIONS","PARTY_B_OPTIONS","formData","ref","__spreadValues","onReset","MessagePlugin","warning","onSubmit","validateResult","success","beforeUpload","file","test","size","handleFail","error","formatResponse","res","__spreadProps","url"],"mappings":"gtBAAO,MAAMA,EAAa,CACxBC,KAAM,CAAC,CAAEC,UAAU,EAAMC,QAAS,UAAWC,KAAM,UACnDA,KAAM,CAAC,CAAEF,UAAU,EAAMC,QAAS,UAAWC,KAAM,UACnDC,QAAS,CAAC,CAAEH,UAAU,EAAMC,QAAS,YAAaC,KAAM,UACxDE,OAAQ,CAAC,CAAEJ,UAAU,EAAMC,QAAS,UAAWC,KAAM,UACrDG,OAAQ,CAAC,CAAEL,UAAU,EAAMC,QAAS,QAASC,KAAM,UACnDI,OAAQ,CAAC,CAAEN,UAAU,EAAMC,QAAS,QAASC,KAAM,UACnDK,SAAU,CAAC,CAAEP,UAAU,EAAMC,QAAS,QAASC,KAAM,UACrDM,UAAW,CAAC,CAAER,UAAU,EAAMC,QAAS,QAASC,KAAM,UACtDO,QAAS,CAAC,CAAET,UAAU,EAAMC,QAAS,QAASC,KAAM,WAGzCQ,EAAe,CAC1BX,KAAM,GACNG,KAAM,GACNG,OAAQ,GACRC,OAAQ,GACRC,SAAU,GACVC,UAAW,GACXC,QAAS,GACTN,QAAS,IACTC,OAAQ,EACRO,QAAS,GACTC,MAAO,IAGIC,EAAe,CAC1B,CAAEC,MAAO,MAAOC,MAAO,KACvB,CAAED,MAAO,MAAOC,MAAO,KACvB,CAAED,MAAO,MAAOC,MAAO,MAGZC,EAAkB,CAC7B,CAAEF,MAAO,MAAOC,MAAO,KACvB,CAAED,MAAO,MAAOC,MAAO,KACvB,CAAED,MAAO,MAAOC,MAAO,MAGZE,EAAkB,CAC7B,CAAEH,MAAO,MAAOC,MAAO,KACvB,CAAED,MAAO,MAAOC,MAAO,KACvB,CAAED,MAAO,MAAOC,MAAO,uZCoMzB,CAAehB,KAAA,uBAef,MAAAmB,EAAAC,EAAAC,EAAA,GAAAV,IAEAW,EAAA,KACEC,EAAAC,QAAA,SAEFC,EAAA,EAAAC,eAAAA,OACE,IAAAA,GACEH,EAAAI,QAAA,SAGJC,EAAAC,GACE,WAAAC,KAAAD,EAAA7B,QAIA6B,EAAAE,KAAA,YACER,EAAAC,QAAA,gBACA,IALAD,EAAAC,QAAA,aACA,GAQJQ,EAAA,EAAAH,KAAAA,MACEN,EAAAU,MAAA,MAAAJ,EAAA7B,cAGFkC,EAAAC,GACEC,OAAAD,GAAA,CAAAF,MAAA,WAAAI,IAAAF,EAAAE"}