{"version":3,"file":"charts-2cf505ea.js","sources":["../../../src/utils/color.ts","../../../src/utils/charts.ts"],"sourcesContent":["import { Color } from 'tvision-color';\nimport * as echarts from 'echarts/core';\nimport {\n  getBrandColor,\n  defaultLightColor,\n  defaultDarkColor\n} from '@/config/color';\nimport { getSettingStore } from '@/store';\n\n/**\n * 依据主题类型获取颜色\n *\n * @export\n * @param {string} theme\n * @returns {}\n */\nexport function getColorFromTheme(theme: string) {\n  const settingStore = getSettingStore();\n  const { colorList, mode } = settingStore;\n  const isDarkMode = mode === 'dark';\n  let themeColorList = [];\n  const themeColor = getBrandColor(theme, colorList);\n\n  if (!/^#[A-F\\d]{6}$/i.test(theme)) {\n    theme = themeColor?.['--td-brand-color'] || '#0052D9';\n    const themIdx = defaultLightColor.indexOf(theme.toLocaleLowerCase());\n    const defaultGradients = !isDarkMode ? defaultLightColor : defaultDarkColor;\n\n    const spliceThemeList = defaultGradients.slice(0, themIdx);\n    themeColorList = defaultGradients\n      .slice(themIdx, defaultGradients.length)\n      .concat(spliceThemeList);\n  } else {\n    theme = themeColor?.['--td-brand-color'];\n    themeColorList = Color.getRandomPalette({\n      color: theme,\n      colorGamut: 'bright',\n      number: 8\n    });\n  }\n\n  return themeColorList;\n}\n\n/** 图表颜色 */\nexport function getChartListColor(): Array<string> {\n  const settingStore = getSettingStore();\n  const { brandTheme } = settingStore;\n  const res = getColorFromTheme(brandTheme);\n\n  return res;\n}\n\n/**\n * 更改图表主题颜色\n *\n * @export\n * @param {Array<string>} chartsList\n * @param {string} theme\n */\nexport function changeChartsTheme(chartsList: echarts.EChartsType[]) {\n  if (chartsList && chartsList.length) {\n    const chartChangeColor = getChartListColor();\n\n    for (let index = 0; index < chartsList.length; index++) {\n      const elementChart = chartsList[index];\n\n      if (elementChart) {\n        const optionVal = elementChart.getOption();\n\n        // 更改主题颜色\n        optionVal.color = chartChangeColor;\n\n        elementChart.setOption(optionVal, true);\n      }\n    }\n  }\n}\n","import dayjs from 'dayjs';\n\n/**\n * 获取表头数据\n *\n * @export\n * @param {string[]} dateTime\n * @param {number} divideNum\n * @returns {string[]}\n */\nexport function getDateArray(\n  dateTime: string[] = [],\n  divideNum = 10\n): string[] {\n  const timeArray: string[] = [];\n  if (dateTime.length > 0) {\n    for (let i = 0; i < divideNum; i++) {\n      const dateAbsTime: number =\n        (new Date(dateTime[1]).getTime() - new Date(dateTime[0]).getTime()) /\n        divideNum;\n      const enhandTime: number =\n        new Date(dateTime[0]).getTime() + dateAbsTime * i;\n      timeArray.push(dayjs(enhandTime).format('YYYY-MM-DD'));\n    }\n  }\n\n  return timeArray;\n}\n\n/**\n * 获取随机数\n *\n * @param {number} [num=100]\n * @returns\n *\n * @memberOf DashboardBase\n */\nexport function getRandomArray(num = 100) {\n  let resultNum = Number((Math.random() * num).toFixed(0));\n\n  if (resultNum <= 1) {\n    resultNum = 1;\n  }\n\n  return resultNum;\n}\n"],"names":["getChartListColor","settingStore","getSettingStore","brandTheme","theme","colorList","mode","isDarkMode","themeColorList","themeColor","getBrandColor","test","Color","getRandomPalette","color","colorGamut","number","themIdx","defaultLightColor","indexOf","toLocaleLowerCase","defaultGradients","defaultDarkColor","spliceThemeList","slice","length","concat","getColorFromTheme","changeChartsTheme","chartsList","chartChangeColor","index","elementChart","optionVal","getOption","setOption","getDateArray","dateTime","divideNum","timeArray","i","dateAbsTime","Date","getTime","enhandTime","push","dayjs","format","getRandomArray","num","resultNum","Number","Math","random","toFixed"],"mappings":"6GA6CO,SAASA,IACd,MAAMC,EAAeC,KACfC,WAAEA,GAAeF,EAGhB,OAlCF,SAA2BG,GAChC,MAAMH,EAAeC,KACfG,UAAEA,EAAWC,KAAAA,GAASL,EACtBM,EAAsB,SAATD,EACnB,IAAIE,EAAiB,GACf,MAAAC,EAAaC,EAAcN,EAAOC,GAExC,GAAK,iBAAiBM,KAAKP,GAUzBA,EAAqB,MAAbK,OAAa,EAAAA,EAAA,oBACrBD,EAAiBI,EAAMC,iBAAiB,CACtCC,MAAOV,EACPW,WAAY,SACZC,OAAQ,QAduB,CACjCZ,SAAQK,WAAa,sBAAuB,UAC5C,MAAMQ,EAAUC,EAAkBC,QAAQf,EAAMgB,qBAC1CC,EAAoBd,EAAiCe,EAApBJ,EAEjCK,EAAkBF,EAAiBG,MAAM,EAAGP,GAClDT,EAAiBa,EACdG,MAAMP,EAASI,EAAiBI,QAChCC,OAAOH,GAUL,OAAAf,EAOKmB,CAAkBxB,GAYzB,SAASyB,EAAkBC,GAC5B,GAAAA,GAAcA,EAAWJ,OAAQ,CACnC,MAAMK,EAAmB9B,IAEzB,IAAA,IAAS+B,EAAQ,EAAGA,EAAQF,EAAWJ,OAAQM,IAAS,CACtD,MAAMC,EAAeH,EAAWE,GAEhC,GAAIC,EAAc,CACV,MAAAC,EAAYD,EAAaE,YAG/BD,EAAUnB,MAAQgB,EAELE,EAAAG,UAAUF,GAAW,MC/DnC,SAASG,EACdC,EAAqB,GACrBC,EAAY,IAEZ,MAAMC,EAAsB,GACxB,GAAAF,EAASZ,OAAS,EACpB,IAAA,IAASe,EAAI,EAAGA,EAAIF,EAAWE,IAAK,CAClC,MAAMC,GACH,IAAIC,KAAKL,EAAS,IAAIM,UAAY,IAAID,KAAKL,EAAS,IAAIM,WACzDL,EACIM,EACJ,IAAIF,KAAKL,EAAS,IAAIM,UAAYF,EAAcD,EAClDD,EAAUM,KAAKC,EAAMF,GAAYG,OAAO,eAIrC,OAAAR,EAWO,SAAAS,EAAeC,EAAM,KAC/B,IAAAC,EAAYC,QAAQC,KAAKC,SAAWJ,GAAKK,QAAQ,IAM9C,OAJHJ,GAAa,IACHA,EAAA,GAGPA"}