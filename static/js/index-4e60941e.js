var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,n=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,o=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&n(e,t,a[t]);if(l)for(var t of l(a))i.call(a,t)&&n(e,t,a[t]);return e},r=(e,l)=>a(e,t(l));import{d as u,g as c,k as d,h as p,K as v,c as f,y,x as h,u as m,M as b,bG as g,aV as w,o as k,a as x,e as _,t as T,N as P,c0 as C,s as I,I as j,V as E,aR as N,bJ as O,bL as K}from"./.pnpm-3e45f2fc.js";import{C as S,a as U,b as V}from"./index-a0836ed2.js";import{T as A}from"./index-8d0f7f7e.js";import{g as D}from"./list-cbaf6115.js";import{a as G,p as L,_ as M}from"./index-8f8d23fb.js";const R=[{colKey:"row-select",type:"multiple",width:64,fixed:"left"},{title:"合同名称",align:"left",width:300,colKey:"name",fixed:"left"},{title:"合同状态",colKey:"status",width:200,cell:{col:"status"}},{title:"合同编号",width:200,ellipsis:!0,colKey:"no"},{title:"合同类型",width:200,ellipsis:!0,colKey:"contractType"},{title:"合同收付类型",width:200,ellipsis:!0,colKey:"paymentType"},{title:"合同金额 (元)",width:200,ellipsis:!0,colKey:"amount"},{align:"left",fixed:"right",width:200,colKey:"op",title:"操作"}],z={class:"left-operation-container"},B={key:0,class:"selected-count"},F={class:"search-input"},X={key:0},$={key:1},q={key:2},H={key:0,class:"payment-col"},J={key:1,class:"payment-col"},Y=["onClick"],Q=M(u(r(o({},{name:"ListBase"}),{setup(e){const a=G(),t=c([]),l=c({defaultPageSize:20,total:100,defaultCurrent:1}),s=c(""),i=c(!1),n=()=>{return e=this,a=null,s=function*(){i.value=!0;try{const{list:e}=yield D();t.value=e,l.value=r(o({},l.value),{total:e.length})}catch(e){}finally{i.value=!1}},new Promise((t,l)=>{var i=e=>{try{o(s.next(e))}catch(a){l(a)}},n=e=>{try{o(s.throw(e))}catch(a){l(a)}},o=e=>e.done?t(e.value):Promise.resolve(e.value).then(i,n);o((s=s.apply(e,a)).next())});var e,a,s},u=c(-1),M=d(()=>{if(u.value>-1){const{name:e}=t.value[u.value];return`删除后，${e}的所有合同信息将被清空，且无法恢复`}return""});p(()=>{n()});const Q=c(!1),W=c([1,2]),Z=v(),ee=()=>{u.value=-1},ae=()=>{t.value.splice(u.value,1),l.value.total=t.value.length;const e=W.value.indexOf(u.value);e>-1&&W.value.splice(e,1),Q.value=!1,b.success("删除成功"),ee()},te=()=>{ee()},le=e=>{W.value=e},se=(e,a)=>{},ie=(e,a)=>{},ne=()=>{Z.push("/form/base")},oe=d(()=>a.isUseTabsRouter?48:0),re=()=>document.querySelector(`.${L}-layout`);return(e,a)=>{const n=j,o=E,r=N,c=O,d=K,p=g,v=w;return k(),f("div",null,[y(p,{class:"list-card-container"},{default:h(()=>[y(r,{justify:"space-between"},{default:h(()=>[x("div",z,[y(n,{onClick:ne},{default:h(()=>[_("新建合同")]),_:1}),y(n,{variant:"base",theme:"default",disabled:!W.value.length},{default:h(()=>[_(" 导出合同 ")]),_:1},8,["disabled"]),W.value.length?(k(),f("p",B," 已选"+T(W.value.length)+"项 ",1)):P("v-if",!0)]),x("div",F,[y(o,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),placeholder:"请输入你需要搜索的内容",clearable:""},{"suffix-icon":h(()=>[y(m(C),{size:"20px"})]),_:1},8,["modelValue"])])]),_:1}),y(d,{data:t.value,columns:m(R),"row-key":"index","vertical-align":"top",hover:!0,pagination:l.value,"selected-row-keys":W.value,loading:i.value,"header-affixed-top":{offsetTop:m(oe),container:re},onPageChange:se,onChange:ie,onSelectChange:le},{status:h(({row:e})=>[e.status===m(S).FAIL?(k(),I(c,{key:0,theme:"danger",variant:"light"},{default:h(()=>[_(" 审核失败 ")]),_:1})):P("v-if",!0),e.status===m(S).AUDIT_PENDING?(k(),I(c,{key:1,theme:"warning",variant:"light"},{default:h(()=>[_(" 待审核 ")]),_:1})):P("v-if",!0),e.status===m(S).EXEC_PENDING?(k(),I(c,{key:2,theme:"warning",variant:"light"},{default:h(()=>[_(" 待履行 ")]),_:1})):P("v-if",!0),e.status===m(S).EXECUTING?(k(),I(c,{key:3,theme:"success",variant:"light"},{default:h(()=>[_(" 履行中 ")]),_:1})):P("v-if",!0),e.status===m(S).FINISH?(k(),I(c,{key:4,theme:"success",variant:"light"},{default:h(()=>[_(" 已完成 ")]),_:1})):P("v-if",!0)]),contractType:h(({row:e})=>[e.contractType===m(U).MAIN?(k(),f("p",X,"审核失败")):P("v-if",!0),e.contractType===m(U).SUB?(k(),f("p",$,"待审核")):P("v-if",!0),e.contractType===m(U).SUPPLEMENT?(k(),f("p",q,"待履行")):P("v-if",!0)]),paymentType:h(({row:e})=>[e.paymentType===m(V).PAYMENT?(k(),f("div",H,[_(" 付款 "),y(A,{class:"dashboard-item-trend",type:"up"})])):P("v-if",!0),e.paymentType===m(V).RECEIPT?(k(),f("div",J,[_(" 收款 "),y(A,{class:"dashboard-item-trend",type:"down"})])):P("v-if",!0)]),op:h(e=>[x("a",{class:"t-button-link",onClick:a[1]||(a[1]=e=>{Z.push("/detail/base")})}," 详情 "),x("a",{class:"t-button-link",onClick:a=>{return t=e,u.value=t.rowIndex,void(Q.value=!0);var t}}," 删除 ",8,Y)]),_:1},8,["data","columns","pagination","selected-row-keys","loading","header-affixed-top"])]),_:1}),y(v,{visible:Q.value,"onUpdate:visible":a[2]||(a[2]=e=>Q.value=e),header:"确认删除当前所选合同？",body:m(M),"on-cancel":te,onConfirm:ae},null,8,["visible","body"])])}}})),[["__scopeId","data-v-7dd4f459"],["__file","/home/runner/work/vue3-admin-boilerplate/vue3-admin-boilerplate/src/pages/list/base/index.vue"]]);export{Q as default};
//# sourceMappingURL=index-4e60941e.js.map
