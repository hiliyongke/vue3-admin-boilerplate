var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,t=(a,l,s)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[l]=s,n=(e,a)=>{for(var l in a||(a={}))r.call(a,l)&&t(e,l,a[l]);if(s)for(var l of s(a))o.call(a,l)&&t(e,l,a[l]);return e};import{i,g as d,d as c,L as p,o as u,s as m,x as f,u as v,c as g,F as y,y as h,a as b,e as w,b7 as k,t as _,K as V,m as C,M as x,Q as q,U,E as z,aP as P,H as O,G as j,p as I,b as R}from"./.pnpm-e6c61d32.js";import{u as S,_ as L,a as M,C as D}from"./index-4900769b.js";const E=""+new URL("../png/name-b2aab18e.png",import.meta.url).href,F=""+new URL("../png/name-e2efc5f1.png",import.meta.url).href,H=(e=60)=>{let a;i(()=>{clearInterval(a)});const l=d(0);return[l,()=>{l.value=e,a=setInterval(()=>{l.value>0?l.value-=1:(clearInterval(a),l.value=0)},1e3)}]},A=e=>(I("data-v-d1d420b7"),e=e(),R(),e),G={class:"check-container remember-pwd"},K=A(()=>b("span",{class:"tip"},"忘记账号？",-1)),Q={class:"tip-container"},Y=A(()=>b("span",{class:"tip"},"请使用微信扫一扫登录",-1)),B={class:"refresh"},J={class:"switch-container"},N=L(c({__name:"login",setup(e){const a=S(),l={phone:[{required:!0,message:"手机号必填",type:"error"}],account:[{required:!0,message:"账号必填",type:"error"}],password:[{required:!0,message:"密码必填",type:"error"}],verifyCode:[{required:!0,message:"验证码必填",type:"error"}]},s=d("password"),r=d(n({},{phone:"",account:"admin",password:"admin",verifyCode:"",checked:!1})),o=d(!1),[t,i]=H(),c=e=>{s.value=e},I=p(),R=e=>{return l=this,s=[e],o=function*({validateResult:e}){if(!0===e)try{yield a.login(r.value),x.success("登录成功"),I.push({path:"/dashboard/base"})}catch(l){x.error(l.message)}},new Promise((e,a)=>{var r=e=>{try{n(o.next(e))}catch(l){a(l)}},t=e=>{try{n(o.throw(e))}catch(l){a(l)}},n=a=>a.done?e(a.value):Promise.resolve(a.value).then(r,t);n((o=o.apply(l,s)).next())});var l,s,o};return(e,a)=>{const n=q,d=U,p=z,x=P,I=O,S=j;return u(),m(S,{ref:"form",class:C(["item-container","login-"+v(s)]),data:v(r),rules:l,"label-width":"0",onSubmit:R},{default:f(()=>["password"==v(s)?(u(),g(y,{key:0},[h(p,{name:"account"},{default:f(()=>[h(d,{modelValue:v(r).account,"onUpdate:modelValue":a[0]||(a[0]=e=>v(r).account=e),size:"large",placeholder:"请输入账号：admin"},{"prefix-icon":f(()=>[h(n,{name:"user"})]),_:1},8,["modelValue"])]),_:1}),h(p,{name:"password"},{default:f(()=>[h(d,{modelValue:v(r).password,"onUpdate:modelValue":a[2]||(a[2]=e=>v(r).password=e),size:"large",type:v(o)?"text":"password",clearable:"",placeholder:"请输入登录密码：admin"},{"prefix-icon":f(()=>[h(n,{name:"lock-on"})]),"suffix-icon":f(()=>[h(n,{name:v(o)?"browse":"browse-off",onClick:a[1]||(a[1]=e=>o.value=!v(o))},null,8,["name"])]),_:1},8,["modelValue","type"])]),_:1}),b("div",G,[h(x,null,{default:f(()=>[w("记住账号")]),_:1}),K])],64)):"qrcode"==v(s)?(u(),g(y,{key:1},[b("div",Q,[Y,b("span",B,[w(" 刷新 "),h(n,{name:"refresh"})])]),h(k,{value:"",size:192,level:"H"})],64)):(u(),m(p,{key:2,class:"verification-code",name:"verifyCode"},{default:f(()=>[h(d,{modelValue:v(r).verifyCode,"onUpdate:modelValue":a[3]||(a[3]=e=>v(r).verifyCode=e),size:"large",placeholder:"请输入验证码"},null,8,["modelValue"]),h(I,{variant:"outline",disabled:v(t)>0,onClick:v(i)},{default:f(()=>[w(_(0==v(t)?"发送验证码":v(t)+"秒后可重发"),1)]),_:1},8,["disabled","onClick"])]),_:1})),"qrcode"!==v(s)?(u(),m(p,{key:3,class:"btn-container"},{default:f(()=>[h(I,{block:"",size:"large",type:"submit"},{default:f(()=>[w(" 登录 ")]),_:1})]),_:1})):V("",!0),b("div",J,["password"!==v(s)?(u(),g("span",{key:0,class:"tip",onClick:a[4]||(a[4]=e=>c("password"))}," 使用账号密码登录 ")):V("",!0),"qrcode"!==v(s)?(u(),g("span",{key:1,class:"tip",onClick:a[5]||(a[5]=e=>c("qrcode"))}," 使用微信扫码登录 ")):V("",!0),"phone"!==v(s)?(u(),g("span",{key:2,class:"tip",onClick:a[6]||(a[6]=e=>c("phone"))}," 使用手机号登录 ")):V("",!0)])]),_:1},8,["class","data"])}}}),[["__scopeId","data-v-d1d420b7"]]),T=e=>(I("data-v-8828c609"),e=e(),R(),e),W=T(()=>b("span",null,"服务协议",-1)),X=T(()=>b("span",null,"隐私声明",-1)),Z={class:"switch-container"},$=L(c({__name:"register",emits:["registerSuccess"],setup(e,{emit:a}){const l={phone:[{required:!0,message:"手机号必填",type:"error"}],email:[{required:!0,message:"邮箱必填",type:"error"},{email:!0,message:"请输入正确的邮箱",type:"warning"}],password:[{required:!0,message:"密码必填",type:"error"}],verifyCode:[{required:!0,message:"验证码必填",type:"error"}]},s=d("phone"),r=d(),o=d(n({},{phone:"",email:"",password:"",verifyCode:"",checked:!1})),t=d(!1),[i,c]=H(),p=({validateResult:e})=>{if(!0===e){if(!o.value.checked)return void MessagePlugin.error("请同意服务协议和隐私声明");MessagePlugin.success("注册成功"),a("registerSuccess")}};return(e,a)=>{const n=q,d=U,g=z,y=O,k=P,x=j;return u(),m(x,{ref_key:"form",ref:r,class:C(["item-container","register-"+v(s)]),data:v(o),rules:l,"label-width":"0",onSubmit:p},{default:f(()=>["phone"==v(s)?(u(),m(g,{key:0,name:"phone"},{default:f(()=>[h(d,{modelValue:v(o).phone,"onUpdate:modelValue":a[0]||(a[0]=e=>v(o).phone=e),maxlength:11,size:"large",placeholder:"请输入您的手机号"},{"prefix-icon":f(()=>[h(n,{name:"user"})]),_:1},8,["modelValue"])]),_:1})):V("",!0),"email"==v(s)?(u(),m(g,{key:1,name:"email"},{default:f(()=>[h(d,{modelValue:v(o).email,"onUpdate:modelValue":a[1]||(a[1]=e=>v(o).email=e),type:"text",size:"large",placeholder:"请输入您的邮箱"},{"prefix-icon":f(()=>[h(n,{name:"mail"})]),_:1},8,["modelValue"])]),_:1})):V("",!0),h(g,{name:"password"},{default:f(()=>[h(d,{modelValue:v(o).password,"onUpdate:modelValue":a[3]||(a[3]=e=>v(o).password=e),size:"large",type:v(t)?"text":"password",clearable:"",placeholder:"请输入登录密码"},{"prefix-icon":f(()=>[h(n,{name:"lock-on"})]),"suffix-icon":f(()=>[h(n,{name:v(t)?"browse":"browse-off",onClick:a[2]||(a[2]=e=>t.value=!v(t))},null,8,["name"])]),_:1},8,["modelValue","type"])]),_:1}),"phone"==v(s)?(u(),m(g,{key:2,class:"verification-code",name:"verifyCode"},{default:f(()=>[h(d,{modelValue:v(o).verifyCode,"onUpdate:modelValue":a[4]||(a[4]=e=>v(o).verifyCode=e),size:"large",placeholder:"请输入验证码"},null,8,["modelValue"]),h(y,{variant:"outline",disabled:v(i)>0,onClick:v(c)},{default:f(()=>[w(_(0==v(i)?"发送验证码":v(i)+"秒后可重发"),1)]),_:1},8,["disabled","onClick"])]),_:1})):V("",!0),h(g,{class:"check-container",name:"checked"},{default:f(()=>[h(k,{modelValue:v(o).checked,"onUpdate:modelValue":a[5]||(a[5]=e=>v(o).checked=e)},{default:f(()=>[w("我已阅读并同意")]),_:1},8,["modelValue"]),W,w(" 和 "),X]),_:1}),h(g,null,{default:f(()=>[h(y,{block:"",size:"large",type:"submit"},{default:f(()=>[w(" 注册 ")]),_:1})]),_:1}),b("div",Z,[b("span",{class:"tip",onClick:a[6]||(a[6]=e=>{return a="phone"==v(s)?"email":"phone",r.value.reset(),void(s.value=a);var a})},_("phone"==v(s)?"使用邮箱注册":"使用手机号注册"),1)])]),_:1},8,["class","data"])}}}),[["__scopeId","data-v-8828c609"]]),ee=e=>(I("data-v-038f82b4"),e=e(),R(),e),ae={class:"wrapper"},le={class:"login-wrapper"},se={class:"login-container"},re=ee(()=>b("img",{class:"login-one-ball",src:E},null,-1)),oe=ee(()=>b("img",{class:"login-two-ball",src:F},null,-1)),te={class:"title-container"},ne=ee(()=>b("h1",{class:"title margin-no"},"登录",-1)),ie={class:"sub-title"},de={class:"tip"},ce={class:"copyright"};var pe;const ue=L(c((pe=n({},{name:"LoginIndex"}),a(pe,l({setup(e){const a=d("login"),l=e=>{a.value=e};return(e,s)=>(u(),g("div",ae,[b("div",le,[b("div",se,[re,oe,b("div",te,[ne,b("div",ie,[b("p",de,_("register"==v(a)?"已有账号?":"没有账号吗?"),1),b("p",{class:"tip",onClick:s[0]||(s[0]=e=>l("register"==v(a)?"login":"register"))},_("register"==v(a)?"登录":"注册新账号"),1)])]),"login"===v(a)?(u(),m(N,{key:0})):(u(),m($,{key:1,onRegisterSuccess:s[1]||(s[1]=e=>l("login"))})),h(M)]),b("footer",ce," Copyright @ 2021-"+_((new Date).getFullYear())+" "+_(v(D))+". All Rights Reserved ",1)])]))}})))),[["__scopeId","data-v-038f82b4"]]);export{ue as default};
//# sourceMappingURL=index-92beb1a0.js.map
