{"version":3,"file":"index-493cba20.js","sources":["../../../src/pages/detail/advanced/constants.ts","../../../src/api/detail.ts","../../../src/pages/detail/advanced/components/product.vue","../../../src/pages/detail/advanced/index.vue"],"sourcesContent":["export const BASE_INFO_DATA = [\n  {\n    name: '合同名称',\n    value: '总部办公用品采购项目',\n    type: null\n  },\n  {\n    name: '合同状态',\n    value: '履行中',\n    type: {\n      key: 'contractStatus',\n      value: 'inProgress'\n    }\n  },\n  {\n    name: '合同编号',\n    value: 'BH00010',\n    type: null\n  },\n  {\n    name: '合同类型',\n    value: '主合同',\n    type: null\n  },\n  {\n    name: '合同收付类型',\n    value: '付款',\n    type: null\n  },\n  {\n    name: '合同金额',\n    value: '5,000,000元',\n    type: null\n  },\n  {\n    name: '甲方',\n    value: '腾讯科技（深圳）有限公司',\n    type: null\n  },\n  {\n    name: '乙方',\n    value: '欧尚',\n    type: null\n  },\n  {\n    name: '合同签订日期',\n    value: '2020-12-20',\n    type: null\n  },\n  {\n    name: '合同生效日期',\n    value: '2021-01-20',\n    type: null\n  },\n  {\n    name: '合同结束日期',\n    value: '2022-12-20',\n    type: null\n  },\n  {\n    name: '合同附件',\n    value: '总部办公用品采购项目合同.pdf',\n    type: {\n      key: 'contractAnnex',\n      value: 'pdf'\n    }\n  },\n  {\n    name: '备注',\n    value: '--',\n    type: null\n  },\n  {\n    name: '创建时间',\n    value: '2020-12-22 10:00:00',\n    type: null\n  }\n];\n\nexport const TABLE_COLUMNS_DATA = [\n  {\n    width: 300,\n    ellipsis: true,\n    colKey: 'index',\n    title: '申请号',\n    sorter: (a, b) => a.index.substr(3) - b.index.substr(3)\n  },\n  {\n    width: 200,\n    ellipsis: true,\n    colKey: 'pdName',\n    title: '产品名称',\n    sorter: (a, b) => a.pdName.length - b.pdName.length\n  },\n  {\n    width: 200,\n    ellipsis: true,\n    colKey: 'pdNum',\n    title: '产品编号'\n  },\n  {\n    width: 200,\n    ellipsis: true,\n    colKey: 'purchaseNum',\n    title: '采购数量',\n    sorter: (a, b) => a.purchaseNum - b.purchaseNum\n  },\n  {\n    width: 200,\n    ellipsis: true,\n    colKey: 'adminName',\n    title: '申请部门'\n  },\n  {\n    width: 200,\n    ellipsis: true,\n    colKey: 'updateTime',\n    title: '创建时间',\n    sorter: (a, b) => Date.parse(a.updateTime) - Date.parse(b.updateTime)\n  },\n  {\n    align: 'left',\n    fixed: 'right',\n    width: 200,\n    className: 'test2',\n    colKey: 'op',\n    title: '操作'\n  }\n];\n\nexport const PRODUCT_LIST = [\n  {\n    name: 'MacBook Pro 2021',\n    subTitle: 'MacBook Pro 2021',\n    size: '13.3 英寸',\n    cpu: 'Apple M1',\n    memory: 'RAM 16GB',\n    info: '最高可选配 16GB 内存 · 最高可选配 2TB 存储设备 电池续航最长达 18 小时',\n    use: 1420,\n    stock: 1500\n  },\n  {\n    name: 'Surface Laptop Go',\n    subTitle: '微软（Microsoft Corporation）',\n    size: '12.4 英寸',\n    cpu: 'Core i7',\n    memory: 'RAM 16GB',\n    info: '常规使用 Surface，续航时间最长可达13小时 随时伴您工作',\n    use: 120,\n    stock: 2000\n  }\n];\n","import request from '@/utils/request';\n\nconst Api = {\n  PurchaseList: '/mock/api/get-purchase-list',\n  ProjectList: '/mock/api/get-project-list'\n};\n\nexport function getPurchaseList() {\n  return request.get({\n    url: Api.PurchaseList\n  });\n}\n\nexport function getProjectList() {\n  return request.get({\n    url: Api.ProjectList\n  });\n}\n","<template>\n  <div class=\"operator-block operator-gap\">\n    <div class=\"operator-content\">\n      <div class=\"operator-title\">\n        <t-icon\n          name=\"cart\"\n          class=\"operator-title-icon\"\n        />\n        <h1>{{ data.name }}</h1>\n        <div class=\"operator-title-subtitle\">\n          {{ data.subtitle }}\n        </div>\n        <div class=\"operator-title-tags\">\n          <t-tag\n            class=\"operator-title-tag\"\n            theme=\"success\"\n            size=\"small\"\n          >\n            {{ data.size }}\n          </t-tag>\n          <t-tag\n            class=\"operator-title-tag\"\n            size=\"small\"\n          >\n            {{ data.cpu }}\n          </t-tag>\n          <t-tag\n            class=\"operator-title-tag\"\n            size=\"small\"\n          >\n            {{ data.memory }}\n          </t-tag>\n        </div>\n      </div>\n      <div class=\"operator-item\">\n        <span class=\"operator-item-info\">{{ data.info }}</span>\n        <t-icon\n          class=\"operator-item-icon\"\n          name=\"chevron-right\"\n          size=\"small\"\n          style=\"color: rgba(0, 0, 0, 0.26)\"\n        />\n      </div>\n    </div>\n    <div class=\"operator-footer\">\n      <span class=\"operator-footer-percentage\">\n        {{ data.use }} / {{ data.stock }}（台）\n      </span>\n      <t-progress\n        class=\"operator-progress\"\n        theme=\"line\"\n        :percentage=\"(data.use / data.stock) * 100\"\n        :label=\"false\"\n        :color=\"data.use / data.stock < 0.5 ? '#E24D59' : ''\"\n        :track-color=\"data.use / data.stock < 0.5 ? '#FCD4D4' : '#D4E3FC'\"\n      />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nexport default defineComponent({\n  props: {\n    data: {\n      type: Object,\n      default: () => {\n        return {};\n      }\n    }\n  }\n});\n</script>\n\n<style lang=\"less\" scoped>\n.operator-gap {\n  margin-left: 20px;\n}\n.operator-block {\n  position: relative;\n  background-color: var(--td-bg-color-container);\n  border: 1px solid var(--td-component-border);\n  border-radius: 3px;\n  .operator-content {\n    height: 256px;\n    padding: 20px 32px 24px 32px;\n    .operator-title-icon {\n      padding: 14px;\n      font-size: 56px;\n      color: var(--td-brand-color);\n      background: var(--td-brand-color-1);\n      border-radius: 100%;\n    }\n    .operator-title {\n      position: relative;\n      margin-bottom: 25px;\n      h1 {\n        display: inline-block;\n        font-size: 24px;\n        font-weight: 500;\n        color: var(--td-text-color-primary);\n      }\n      &-subtitle {\n        display: block;\n        width: 60%;\n        font-size: 14px;\n        font-weight: 400;\n        color: var(--td-text-color-placeholder);\n      }\n      &-tag {\n        margin-top: 8px;\n        margin-right: 4px;\n        margin-left: unset;\n        border: unset;\n      }\n      &-icon {\n        position: absolute;\n        top: 0px;\n        right: 0px;\n      }\n      svg {\n        circle {\n          fill: var(--td-brand-color-2);\n        }\n        path {\n          fill: var(--td-brand-color);\n        }\n      }\n    }\n    .operator-item {\n      position: relative;\n      padding-top: 8px;\n      padding-bottom: 8px;\n      &-info {\n        display: inline-block;\n        width: 60%;\n        font-size: 14px;\n        color: var(--td-text-color-placeholder);\n        text-align: left;\n      }\n      &-icon {\n        position: absolute;\n        right: 0;\n        bottom: 8px;\n      }\n    }\n  }\n  .operator-footer {\n    position: absolute;\n    bottom: 0px;\n    left: 0;\n    width: 100%;\n    .t-progress--thin {\n      display: unset;\n    }\n    &-percentage {\n      position: absolute;\n      right: 32px;\n      bottom: 15px;\n      color: var(--td-text-color-placeholder);\n    }\n  }\n}\n</style>\n","<template>\n  <div class=\"detail-advanced\">\n    <t-card title=\"基本信息\">\n      <div class=\"info-block\">\n        <div\n          v-for=\"(item, index) in BASE_INFO_DATA\"\n          :key=\"index\"\n          class=\"info-item\"\n        >\n          <h1>{{ item.name }}</h1>\n          <span\n            :class=\"{\n              ['inProgress']: item.type && item.type.value === 'inProgress',\n              ['pdf']: item.type && item.type.value === 'pdf'\n            }\"\n          >\n            <i v-if=\"item.type && item.type.key === 'contractStatus'\"></i>\n            {{ item.value }}\n          </span>\n        </div>\n      </div>\n    </t-card>\n\n    <!-- 发票进度 -->\n    <t-card\n      title=\"发票进度\"\n      class=\"container-base-margin-top\"\n    >\n      <t-row justify=\"space-between\">\n        <t-steps :current=\"updateCurrent\">\n          <t-step-item\n            title=\"申请提交\"\n            content=\"已于12月21日提交\"\n          />\n          <t-step-item\n            title=\"电子发票\"\n            content=\"预计1～3个工作日\"\n          />\n          <t-step-item\n            title=\"发票已邮寄\"\n            content=\"电子发票开出后7个工作日联系\"\n          />\n          <t-step-item\n            title=\"完成\"\n            content\n          />\n        </t-steps>\n      </t-row>\n    </t-card>\n\n    <!-- 产品目录 -->\n    <t-card\n      title=\"产品目录\"\n      class=\"container-base-margin-top\"\n    >\n      <template #option>\n        <t-radio-group default-value=\"dateVal\">\n          <t-radio-button value=\"dateVal\">季度</t-radio-button>\n          <t-radio-button value=\"monthVal\">月份</t-radio-button>\n        </t-radio-group>\n      </template>\n      <t-row\n        :gutter=\"16\"\n        class=\"product-block-container\"\n      >\n        <t-col :xl=\"4\">\n          <div class=\"product-add\">\n            <div class=\"product-sub\">\n              <t-icon\n                name=\"add\"\n                class=\"product-sub-icon\"\n              />\n              <span>新增产品</span>\n            </div>\n          </div>\n        </t-col>\n        <t-col\n          v-for=\"(item, index) in PRODUCT_LIST\"\n          :key=\"index\"\n          :xl=\"4\"\n        >\n          <product :data=\"item\" />\n        </t-col>\n      </t-row>\n    </t-card>\n\n    <!-- 产品采购明细 -->\n    <t-card\n      title=\"产品采购明细\"\n      class=\"container-base-margin-top\"\n    >\n      <t-table\n        :columns=\"columns\"\n        :data=\"data\"\n        :pagination=\"pagination\"\n        :hover=\"true\"\n        row-key=\"index\"\n        size=\"large\"\n        @sort-change=\"sortChange\"\n        @change=\"rehandleChange\"\n      >\n        <template #pdName=\"{ row }\">\n          <span>\n            {{ row.pdName }}\n            <t-tag\n              v-if=\"row.pdType\"\n              size=\"small\"\n            >\n              {{ row.pdType }}\n            </t-tag>\n          </span>\n        </template>\n\n        <template #purchaseNum=\"{ row }\">\n          <span>\n            {{ row.purchaseNum }}\n            <t-tag\n              v-if=\"row.purchaseNum > 50\"\n              theme=\"danger\"\n              variant=\"light\"\n              size=\"small\"\n            >\n              超预算\n            </t-tag>\n          </span>\n        </template>\n\n        <template #op=\"slotProps\">\n          <a\n            :class=\"prefix + '-link'\"\n            @click=\"listClick()\"\n          >\n            管理\n          </a>\n          <a\n            :class=\"prefix + '-link'\"\n            @click=\"deleteClickOp(slotProps)\"\n          >\n            删除\n          </a>\n        </template>\n\n        <template #op-column>\n          <t-icon name=\"descending-order\" />\n        </template>\n      </t-table>\n    </t-card>\n\n    <t-dialog\n      v-model:visible=\"visible\"\n      header=\"基本信息\"\n      @confirm=\"onConfirm\"\n    >\n      <template #body>\n        <div class=\"dialog-info-block\">\n          <div\n            v-for=\"(item, index) in BASE_INFO_DATA\"\n            :key=\"index\"\n            class=\"info-item\"\n          >\n            <h1>{{ item.name }}</h1>\n            <span\n              :class=\"{\n                ['inProgress']: item.type && item.type.value === 'inProgress',\n                ['pdf']: item.type && item.type.value === 'pdf'\n              }\"\n            >\n              <i v-if=\"item.type && item.type.key === 'contractStatus'\"></i>\n              {{ item.value }}\n            </span>\n          </div>\n        </div>\n      </template>\n    </t-dialog>\n  </div>\n</template>\n\n<script lang=\"ts\">\nexport default {\n  name: 'DetailAdvanced'\n};\n</script>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted } from 'vue';\nimport { prefix } from '@/config/global';\nimport {\n  BASE_INFO_DATA,\n  TABLE_COLUMNS_DATA as columns,\n  PRODUCT_LIST\n} from './constants';\nimport { getPurchaseList } from '@/api/detail';\n\nimport Product from './components/product.vue';\n\nconst data = ref([]);\nconst pagination = ref({\n  defaultPageSize: 10,\n  total: 100,\n  defaultCurrent: 1\n});\n\nconst updateCurrent = ref(0);\n\nconst stepUpdate = () => {\n  setInterval(() => {\n    if (updateCurrent.value > 5) {\n      updateCurrent.value = -1;\n    }\n    updateCurrent.value += 1;\n  }, 2000);\n};\n\nconst fetchData = async () => {\n  try {\n    const { list } = await getPurchaseList();\n    data.value = list;\n    pagination.value = {\n      ...pagination.value,\n      total: list.length\n    };\n  } catch (e) {\n    console.log(e);\n  }\n};\n\nonMounted(() => {\n  stepUpdate();\n  fetchData();\n});\n\nconst visible = ref(false);\nconst sortChange = val => {\n  console.log(val);\n};\nconst rehandleChange = (changeParams, triggerAndData) => {\n  console.log('统一Change', changeParams, triggerAndData);\n};\nconst listClick = () => {\n  visible.value = true;\n};\nconst deleteClickOp = columns => {\n  data.value.splice(columns.rowIndex, 1);\n};\nconst onConfirm = () => {\n  visible.value = false;\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import url('./index.less');\n</style>\n"],"names":["BASE_INFO_DATA","name","value","type","key","TABLE_COLUMNS_DATA","width","ellipsis","colKey","title","sorter","a","b","index","substr","pdName","length","purchaseNum","Date","parse","updateTime","align","fixed","className","PRODUCT_LIST","subTitle","size","cpu","memory","info","use","stock","Api","_sfc_main$1","defineComponent","props","data","Object","default","_hoisted_1","class","_hoisted_4","_hoisted_5","__unplugin_components_2","_createElementVNode","_hoisted_2","_hoisted_3","_createVNode","_component_t_icon","_toDisplayString","_ctx","subtitle","_component_t_tag","theme","_","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_component_t_progress","percentage","label","color","ref","pagination","defaultPageSize","total","defaultCurrent","updateCurrent","fetchData","__async","this","list","request","get","url","__spreadProps","__spreadValues","e","onMounted","setInterval","visible","sortChange","val","rehandleChange","changeParams","triggerAndData","onConfirm","columns2","splice","rowIndex"],"mappings":"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"}