var e=Object.defineProperty,a=Object.defineProperties,s=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,t=(a,s,l)=>s in a?e(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,n=(e,a)=>{for(var s in a||(a={}))r.call(a,s)&&t(e,s,a[s]);if(l)for(var s of l(a))o.call(a,s)&&t(e,s,a[s]);return e};import{i,g as d,d as c,A as p,o as u,m,x as f,u as v,c as g,F as y,l as h,a as b,e as w,b7 as _,t as k,s as V,y as C,M as x,H as q,I as j,a6 as z,W as U,G as I,a7 as O,p as P,b as R}from"./.pnpm-23496a1a.js";import{a as S,S as L,C as M}from"./user-91c86330.js";import{_ as A}from"./_plugin-vue_export-helper-1b428a4d.js";import"./index-cf7ca57d.js";import"./index-9322a30f.js";const D=""+new URL("../png/name-b2aab18e.png",import.meta.url).href,F=""+new URL("../png/name-e2efc5f1.png",import.meta.url).href,H=(e=60)=>{let a;i(()=>{clearInterval(a)});const s=d(0);return[s,()=>{s.value=e,a=setInterval(()=>{s.value>0?s.value-=1:(clearInterval(a),s.value=0)},1e3)}]},E=e=>(P("data-v-d1d420b7"),e=e(),R(),e),G={class:"check-container remember-pwd"},W=E(()=>b("span",{class:"tip"},"忘记账号？",-1)),Y={class:"tip-container"},B=E(()=>b("span",{class:"tip"},"请使用微信扫一扫登录",-1)),J={class:"refresh"},K={class:"switch-container"},N=A(c({__name:"login",setup(e){const a=S(),s={phone:[{required:!0,message:"手机号必填",type:"error"}],account:[{required:!0,message:"账号必填",type:"error"}],password:[{required:!0,message:"密码必填",type:"error"}],verifyCode:[{required:!0,message:"验证码必填",type:"error"}]},l=d("password"),r=d(n({},{phone:"",account:"admin",password:"admin",verifyCode:"",checked:!1})),o=d(!1),[t,i]=H(),c=e=>{l.value=e},P=p(),R=e=>{return s=this,l=[e],o=function*({validateResult:e}){if(!0===e)try{yield a.login(r.value),x.success("登录成功"),P.push({path:"/dashboard/base"})}catch(s){x.error(s.message)}},new Promise((e,a)=>{var r=e=>{try{n(o.next(e))}catch(s){a(s)}},t=e=>{try{n(o.throw(e))}catch(s){a(s)}},n=a=>a.done?e(a.value):Promise.resolve(a.value).then(r,t);n((o=o.apply(s,l)).next())});var s,l,o};return(e,a)=>{const n=q,d=j,p=z,x=U,P=I,S=O;return u(),m(S,{ref:"form",class:C(["item-container","login-"+v(l)]),data:v(r),rules:s,"label-width":"0",onSubmit:R},{default:f(()=>["password"==v(l)?(u(),g(y,{key:0},[h(p,{name:"account"},{default:f(()=>[h(d,{modelValue:v(r).account,"onUpdate:modelValue":a[0]||(a[0]=e=>v(r).account=e),size:"large",placeholder:"请输入账号：admin"},{"prefix-icon":f(()=>[h(n,{name:"user"})]),_:1},8,["modelValue"])]),_:1}),h(p,{name:"password"},{default:f(()=>[h(d,{modelValue:v(r).password,"onUpdate:modelValue":a[2]||(a[2]=e=>v(r).password=e),size:"large",type:v(o)?"text":"password",clearable:"",placeholder:"请输入登录密码：admin"},{"prefix-icon":f(()=>[h(n,{name:"lock-on"})]),"suffix-icon":f(()=>[h(n,{name:v(o)?"browse":"browse-off",onClick:a[1]||(a[1]=e=>o.value=!v(o))},null,8,["name"])]),_:1},8,["modelValue","type"])]),_:1}),b("div",G,[h(x,null,{default:f(()=>[w("记住账号")]),_:1}),W])],64)):"qrcode"==v(l)?(u(),g(y,{key:1},[b("div",Y,[B,b("span",J,[w(" 刷新 "),h(n,{name:"refresh"})])]),h(_,{value:"",size:192,level:"H"})],64)):(u(),m(p,{key:2,class:"verification-code",name:"verifyCode"},{default:f(()=>[h(d,{modelValue:v(r).verifyCode,"onUpdate:modelValue":a[3]||(a[3]=e=>v(r).verifyCode=e),size:"large",placeholder:"请输入验证码"},null,8,["modelValue"]),h(P,{variant:"outline",disabled:v(t)>0,onClick:v(i)},{default:f(()=>[w(k(0==v(t)?"发送验证码":v(t)+"秒后可重发"),1)]),_:1},8,["disabled","onClick"])]),_:1})),"qrcode"!==v(l)?(u(),m(p,{key:3,class:"btn-container"},{default:f(()=>[h(P,{block:"",size:"large",type:"submit"},{default:f(()=>[w(" 登录 ")]),_:1})]),_:1})):V("",!0),b("div",K,["password"!==v(l)?(u(),g("span",{key:0,class:"tip",onClick:a[4]||(a[4]=e=>c("password"))}," 使用账号密码登录 ")):V("",!0),"qrcode"!==v(l)?(u(),g("span",{key:1,class:"tip",onClick:a[5]||(a[5]=e=>c("qrcode"))}," 使用微信扫码登录 ")):V("",!0),"phone"!==v(l)?(u(),g("span",{key:2,class:"tip",onClick:a[6]||(a[6]=e=>c("phone"))}," 使用手机号登录 ")):V("",!0)])]),_:1},8,["class","data"])}}}),[["__scopeId","data-v-d1d420b7"]]),Q=e=>(P("data-v-8828c609"),e=e(),R(),e),T=Q(()=>b("span",null,"服务协议",-1)),X=Q(()=>b("span",null,"隐私声明",-1)),Z={class:"switch-container"},$=A(c({__name:"register",emits:["registerSuccess"],setup(e,{emit:a}){const s={phone:[{required:!0,message:"手机号必填",type:"error"}],email:[{required:!0,message:"邮箱必填",type:"error"},{email:!0,message:"请输入正确的邮箱",type:"warning"}],password:[{required:!0,message:"密码必填",type:"error"}],verifyCode:[{required:!0,message:"验证码必填",type:"error"}]},l=d("phone"),r=d(),o=d(n({},{phone:"",email:"",password:"",verifyCode:"",checked:!1})),t=d(!1),[i,c]=H(),p=({validateResult:e})=>{if(!0===e){if(!o.value.checked)return void MessagePlugin.error("请同意服务协议和隐私声明");MessagePlugin.success("注册成功"),a("registerSuccess")}};return(e,a)=>{const n=q,d=j,g=z,y=I,_=U,x=O;return u(),m(x,{ref_key:"form",ref:r,class:C(["item-container","register-"+v(l)]),data:v(o),rules:s,"label-width":"0",onSubmit:p},{default:f(()=>["phone"==v(l)?(u(),m(g,{key:0,name:"phone"},{default:f(()=>[h(d,{modelValue:v(o).phone,"onUpdate:modelValue":a[0]||(a[0]=e=>v(o).phone=e),maxlength:11,size:"large",placeholder:"请输入您的手机号"},{"prefix-icon":f(()=>[h(n,{name:"user"})]),_:1},8,["modelValue"])]),_:1})):V("",!0),"email"==v(l)?(u(),m(g,{key:1,name:"email"},{default:f(()=>[h(d,{modelValue:v(o).email,"onUpdate:modelValue":a[1]||(a[1]=e=>v(o).email=e),type:"text",size:"large",placeholder:"请输入您的邮箱"},{"prefix-icon":f(()=>[h(n,{name:"mail"})]),_:1},8,["modelValue"])]),_:1})):V("",!0),h(g,{name:"password"},{default:f(()=>[h(d,{modelValue:v(o).password,"onUpdate:modelValue":a[3]||(a[3]=e=>v(o).password=e),size:"large",type:v(t)?"text":"password",clearable:"",placeholder:"请输入登录密码"},{"prefix-icon":f(()=>[h(n,{name:"lock-on"})]),"suffix-icon":f(()=>[h(n,{name:v(t)?"browse":"browse-off",onClick:a[2]||(a[2]=e=>t.value=!v(t))},null,8,["name"])]),_:1},8,["modelValue","type"])]),_:1}),"phone"==v(l)?(u(),m(g,{key:2,class:"verification-code",name:"verifyCode"},{default:f(()=>[h(d,{modelValue:v(o).verifyCode,"onUpdate:modelValue":a[4]||(a[4]=e=>v(o).verifyCode=e),size:"large",placeholder:"请输入验证码"},null,8,["modelValue"]),h(y,{variant:"outline",disabled:v(i)>0,onClick:v(c)},{default:f(()=>[w(k(0==v(i)?"发送验证码":v(i)+"秒后可重发"),1)]),_:1},8,["disabled","onClick"])]),_:1})):V("",!0),h(g,{class:"check-container",name:"checked"},{default:f(()=>[h(_,{modelValue:v(o).checked,"onUpdate:modelValue":a[5]||(a[5]=e=>v(o).checked=e)},{default:f(()=>[w("我已阅读并同意")]),_:1},8,["modelValue"]),T,w(" 和 "),X]),_:1}),h(g,null,{default:f(()=>[h(y,{block:"",size:"large",type:"submit"},{default:f(()=>[w(" 注册 ")]),_:1})]),_:1}),b("div",Z,[b("span",{class:"tip",onClick:a[6]||(a[6]=e=>{return a="phone"==v(l)?"email":"phone",r.value.reset(),void(l.value=a);var a})},k("phone"==v(l)?"使用邮箱注册":"使用手机号注册"),1)])]),_:1},8,["class","data"])}}}),[["__scopeId","data-v-8828c609"]]),ee=e=>(P("data-v-038f82b4"),e=e(),R(),e),ae={class:"wrapper"},se={class:"login-wrapper"},le={class:"login-container"},re=ee(()=>b("img",{class:"login-one-ball",src:D},null,-1)),oe=ee(()=>b("img",{class:"login-two-ball",src:F},null,-1)),te={class:"title-container"},ne=ee(()=>b("h1",{class:"title margin-no"},"登录",-1)),ie={class:"sub-title"},de={class:"tip"},ce={class:"copyright"};var pe;const ue=A(c((pe=n({},{name:"LoginIndex"}),a(pe,s({setup(e){const a=d("login"),s=e=>{a.value=e};return(e,l)=>(u(),g("div",ae,[b("div",se,[b("div",le,[re,oe,b("div",te,[ne,b("div",ie,[b("p",de,k("register"==v(a)?"已有账号?":"没有账号吗?"),1),b("p",{class:"tip",onClick:l[0]||(l[0]=e=>s("register"==v(a)?"login":"register"))},k("register"==v(a)?"登录":"注册新账号"),1)])]),"login"===v(a)?(u(),m(N,{key:0})):(u(),m($,{key:1,onRegisterSuccess:l[1]||(l[1]=e=>s("login"))})),h(L)]),b("footer",ce," Copyright @ 2021-"+k((new Date).getFullYear())+" "+k(v(M))+". All Rights Reserved ",1)])]))}})))),[["__scopeId","data-v-038f82b4"]]);export{ue as default};
//# sourceMappingURL=index-44ea8a27.js.map
