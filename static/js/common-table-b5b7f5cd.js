var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,i=(e,a)=>{for(var t in a||(a={}))o.call(a,t)&&n(e,t,a[t]);if(l)for(var t of l(a))s.call(a,t)&&n(e,t,a[t]);return e};import{d as r,g as u,k as d,h as c,o as p,c as m,y as f,x as v,u as y,e as h,a as b,s as g,N as _,M as w,V as k,E as x,aL as T,aN as P,aR as V,I as C,H as E,bJ as I,bL as j,aV as N}from"./.pnpm-86d57c44.js";import{T as U}from"./index-a09e472c.js";import{g as O}from"./list-51703af6.js";import{a as K,p as S,_ as L}from"./index-d48c677b.js";import{c as A,d as D,C as M,a as R,b as G}from"./index-a0836ed2.js";const B={class:"list-common-table"},F={class:"table-container"},H={key:0},W={key:1},X={key:2},$={key:0,class:"payment-col"},q={key:1,class:"payment-col"},z=["onClick"],J=["onClick"],Y=L(r({__name:"common-table",setup(e){const l=K(),o=[{title:"合同名称",fixed:"left",width:200,ellipsis:!0,align:"left",colKey:"name"},{title:"合同状态",colKey:"status",width:200,cell:{col:"status"}},{title:"合同编号",width:200,ellipsis:!0,colKey:"no"},{title:"合同类型",width:200,ellipsis:!0,colKey:"contractType"},{title:"合同收付类型",width:200,ellipsis:!0,colKey:"paymentType"},{title:"合同金额 (元)",width:200,ellipsis:!0,colKey:"amount"},{align:"left",fixed:"right",width:200,colKey:"op",title:"操作"}],s=u(i({},{name:"",no:void 0,status:void 0,type:""})),n=u({defaultPageSize:20,total:100,defaultCurrent:1}),r=u(!1),L=u([]),Y=u(!1),Q=()=>{return e=this,l=null,o=function*(){Y.value=!0;try{const{list:o}=yield O();L.value=o,n.value=(e=i({},n.value),l={total:o.length},a(e,t(l)))}catch(o){}finally{Y.value=!1}var e,l},new Promise((a,t)=>{var s=e=>{try{i(o.next(e))}catch(a){t(a)}},n=e=>{try{i(o.throw(e))}catch(a){t(a)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(s,n);i((o=o.apply(e,l)).next())});var e,l,o},Z=u(-1),ee=d(()=>{if(Z.value>-1){const{name:e}=L.value[Z.value];return`删除后，${e}的所有合同信息将被清空，且无法恢复`}return""}),ae=()=>{Z.value=-1},te=()=>{L.value.splice(Z.value,1),n.value.total=L.value.length,r.value=!1,w.success("删除成功"),ae()},le=()=>{ae()};c(()=>{Q()});const oe=e=>{},se=e=>{},ne=(e,a)=>{},ie=(e,a)=>{},re=d(()=>l.isUseTabsRouter?48:0),ue=()=>document.querySelector(`.${S}-layout`);return(e,a)=>{const t=k,l=x,i=T,u=P,d=V,c=C,w=E,O=I,K=j,S=N;return p(),m("div",B,[f(w,{ref:"form",data:s.value,"label-width":80,colon:"",style:{marginBottom:"8px"},onReset:oe,onSubmit:se},{default:v(()=>[f(d,null,{default:v(()=>[f(i,{span:10},{default:v(()=>[f(d,{gutter:[16,24]},{default:v(()=>[f(i,{span:4},{default:v(()=>[f(l,{label:"合同名称",name:"name"},{default:v(()=>[f(t,{modelValue:s.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value.name=e),class:"form-item-content",type:"search",placeholder:"请输入合同名称",style:{minWidth:"134px"}},null,8,["modelValue"])]),_:1})]),_:1}),f(i,{span:4},{default:v(()=>[f(l,{label:"合同状态",name:"status"},{default:v(()=>[f(u,{modelValue:s.value.status,"onUpdate:modelValue":a[1]||(a[1]=e=>s.value.status=e),class:"form-item-content",options:y(A),placeholder:"请选择合同状态"},null,8,["modelValue","options"])]),_:1})]),_:1}),f(i,{span:4},{default:v(()=>[f(l,{label:"合同编号",name:"no"},{default:v(()=>[f(t,{modelValue:s.value.no,"onUpdate:modelValue":a[2]||(a[2]=e=>s.value.no=e),class:"form-item-content",placeholder:"请输入合同编号",style:{minWidth:"134px"}},null,8,["modelValue"])]),_:1})]),_:1}),f(i,{span:4},{default:v(()=>[f(l,{label:"合同类型",name:"type"},{default:v(()=>[f(u,{modelValue:s.value.type,"onUpdate:modelValue":a[3]||(a[3]=e=>s.value.type=e),style:{display:"inline-block"},class:"form-item-content",options:y(D),placeholder:"请选择合同类型"},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:1})]),_:1}),f(i,{span:2,class:"operation-container"},{default:v(()=>[f(c,{theme:"primary",type:"submit",style:{marginLeft:"8px"}},{default:v(()=>[h(" 查询 ")]),_:1}),f(c,{type:"reset",variant:"base",theme:"default"},{default:v(()=>[h(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1},8,["data"]),b("div",F,[f(K,{data:L.value,columns:o,"row-key":"index","vertical-align":"top",hover:!0,pagination:n.value,loading:Y.value,"header-affixed-top":{offsetTop:y(re),container:ue},onPageChange:ne,onChange:ie},{status:v(({row:e})=>[e.status===y(M).FAIL?(p(),g(O,{key:0,theme:"danger",variant:"light"},{default:v(()=>[h(" 审核失败 ")]),_:1})):_("v-if",!0),e.status===y(M).AUDIT_PENDING?(p(),g(O,{key:1,theme:"warning",variant:"light"},{default:v(()=>[h(" 待审核 ")]),_:1})):_("v-if",!0),e.status===y(M).EXEC_PENDING?(p(),g(O,{key:2,theme:"warning",variant:"light"},{default:v(()=>[h(" 待履行 ")]),_:1})):_("v-if",!0),e.status===y(M).EXECUTING?(p(),g(O,{key:3,theme:"success",variant:"light"},{default:v(()=>[h(" 履行中 ")]),_:1})):_("v-if",!0),e.status===y(M).FINISH?(p(),g(O,{key:4,theme:"success",variant:"light"},{default:v(()=>[h(" 已完成 ")]),_:1})):_("v-if",!0)]),contractType:v(({row:e})=>[e.contractType===y(R).MAIN?(p(),m("p",H,"审核失败")):_("v-if",!0),e.contractType===y(R).SUB?(p(),m("p",W,"待审核")):_("v-if",!0),e.contractType===y(R).SUPPLEMENT?(p(),m("p",X,"待履行")):_("v-if",!0)]),paymentType:v(({row:e})=>[e.paymentType===y(G).PAYMENT?(p(),m("p",$,[h(" 付款 "),f(U,{class:"dashboard-item-trend",type:"up"})])):_("v-if",!0),e.paymentType===y(G).RECEIPT?(p(),m("p",q,[h(" 收款 "),f(U,{class:"dashboard-item-trend",type:"down"})])):_("v-if",!0)]),op:v(e=>[b("a",{class:"t-button-link",onClick:e=>{}}," 管理 ",8,z),b("a",{class:"t-button-link",onClick:a=>(({row:e})=>{Z.value=e.rowIndex,r.value=!0})(e)}," 删除 ",8,J)]),_:1},8,["data","pagination","loading","header-affixed-top"]),f(S,{visible:r.value,"onUpdate:visible":a[4]||(a[4]=e=>r.value=e),header:"确认删除当前所选合同？",body:y(ee),"on-cancel":le,onConfirm:te},null,8,["visible","body"])])])}}}),[["__scopeId","data-v-687aa317"],["__file","/home/runner/work/vue3-admin-boilerplate/vue3-admin-boilerplate/src/pages/list/components/common-table.vue"]]);export{Y as C};
//# sourceMappingURL=common-table-b5b7f5cd.js.map
