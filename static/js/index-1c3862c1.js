var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,n=(e,a)=>{for(var t in a||(a={}))s.call(a,t)&&i(e,t,a[t]);if(l)for(var t of l(a))o.call(a,t)&&i(e,t,a[t]);return e},r=(e,l)=>a(e,t(l));import{d as u,g as c,k as d,h as p,c as v,l as y,x as f,u as m,M as h,bG as b,a9 as g,o as w,a as k,e as x,t as _,s as T,c0 as P,m as j,A as C,G as I,I as E,a2 as O,bJ as N,bL as K}from"./.pnpm-baced213.js";import{C as S,a as U,b as A}from"./index-3f67debd.js";import{T as G}from"./index-6a0fc03b.js";import{g as D}from"./list-abb0143c.js";import{b as L}from"./user-292cfcac.js";import{p as M}from"./index-fc62c5a3.js";import{_ as R}from"./_plugin-vue_export-helper-1b428a4d.js";import"./index-1bd30a01.js";const V=[{colKey:"row-select",type:"multiple",width:64,fixed:"left"},{title:"合同名称",align:"left",width:300,colKey:"name",fixed:"left"},{title:"合同状态",colKey:"status",width:200,cell:{col:"status"}},{title:"合同编号",width:200,ellipsis:!0,colKey:"no"},{title:"合同类型",width:200,ellipsis:!0,colKey:"contractType"},{title:"合同收付类型",width:200,ellipsis:!0,colKey:"paymentType"},{title:"合同金额 (元)",width:200,ellipsis:!0,colKey:"amount"},{align:"left",fixed:"right",width:200,colKey:"op",title:"操作"}],z={class:"left-operation-container"},B={key:0,class:"selected-count"},F={class:"search-input"},X={key:0},$={key:1},q={key:2},H={key:0,class:"payment-col"},J={key:1,class:"payment-col"},Q=["onClick"],Y=R(u(r(n({},{name:"ListBase"}),{setup(e){const a=L(),t=c([]),l=c({defaultPageSize:20,total:100,defaultCurrent:1}),s=c(""),o=c(!1),i=()=>{return e=this,a=null,s=function*(){o.value=!0;try{const{list:e}=yield D();t.value=e,l.value=r(n({},l.value),{total:e.length})}catch(e){}finally{o.value=!1}},new Promise((t,l)=>{var o=e=>{try{n(s.next(e))}catch(a){l(a)}},i=e=>{try{n(s.throw(e))}catch(a){l(a)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,i);n((s=s.apply(e,a)).next())});var e,a,s},u=c(-1),R=d(()=>{if(u.value>-1){const{name:e}=t.value[u.value];return`删除后，${e}的所有合同信息将被清空，且无法恢复`}return""});p(()=>{i()});const Y=c(!1),W=c([1,2]),Z=C(),ee=()=>{u.value=-1},ae=()=>{t.value.splice(u.value,1),l.value.total=t.value.length;const e=W.value.indexOf(u.value);e>-1&&W.value.splice(e,1),Y.value=!1,h.success("删除成功"),ee()},te=()=>{ee()},le=e=>{W.value=e},se=(e,a)=>{},oe=(e,a)=>{},ie=()=>{Z.push("/form/base")},ne=d(()=>a.isUseTabsRouter?48:0),re=()=>document.querySelector(`.${M}-layout`);return(e,a)=>{const i=I,n=E,r=O,c=N,d=K,p=b,h=g;return w(),v("div",null,[y(p,{class:"list-card-container"},{default:f(()=>[y(r,{justify:"space-between"},{default:f(()=>[k("div",z,[y(i,{onClick:ie},{default:f(()=>[x("新建合同")]),_:1}),y(i,{variant:"base",theme:"default",disabled:!W.value.length},{default:f(()=>[x(" 导出合同 ")]),_:1},8,["disabled"]),W.value.length?(w(),v("p",B," 已选"+_(W.value.length)+"项 ",1)):T("",!0)]),k("div",F,[y(n,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),placeholder:"请输入你需要搜索的内容",clearable:""},{"suffix-icon":f(()=>[y(m(P),{size:"20px"})]),_:1},8,["modelValue"])])]),_:1}),y(d,{data:t.value,columns:m(V),"row-key":"index","vertical-align":"top",hover:!0,pagination:l.value,"selected-row-keys":W.value,loading:o.value,"header-affixed-top":{offsetTop:m(ne),container:re},onPageChange:se,onChange:oe,onSelectChange:le},{status:f(({row:e})=>[e.status===m(S).FAIL?(w(),j(c,{key:0,theme:"danger",variant:"light"},{default:f(()=>[x(" 审核失败 ")]),_:1})):T("",!0),e.status===m(S).AUDIT_PENDING?(w(),j(c,{key:1,theme:"warning",variant:"light"},{default:f(()=>[x(" 待审核 ")]),_:1})):T("",!0),e.status===m(S).EXEC_PENDING?(w(),j(c,{key:2,theme:"warning",variant:"light"},{default:f(()=>[x(" 待履行 ")]),_:1})):T("",!0),e.status===m(S).EXECUTING?(w(),j(c,{key:3,theme:"success",variant:"light"},{default:f(()=>[x(" 履行中 ")]),_:1})):T("",!0),e.status===m(S).FINISH?(w(),j(c,{key:4,theme:"success",variant:"light"},{default:f(()=>[x(" 已完成 ")]),_:1})):T("",!0)]),contractType:f(({row:e})=>[e.contractType===m(U).MAIN?(w(),v("p",X,"审核失败")):T("",!0),e.contractType===m(U).SUB?(w(),v("p",$,"待审核")):T("",!0),e.contractType===m(U).SUPPLEMENT?(w(),v("p",q,"待履行")):T("",!0)]),paymentType:f(({row:e})=>[e.paymentType===m(A).PAYMENT?(w(),v("div",H,[x(" 付款 "),y(G,{class:"dashboard-item-trend",type:"up"})])):T("",!0),e.paymentType===m(A).RECEIPT?(w(),v("div",J,[x(" 收款 "),y(G,{class:"dashboard-item-trend",type:"down"})])):T("",!0)]),op:f(e=>[k("a",{class:"t-button-link",onClick:a[1]||(a[1]=e=>{Z.push("/detail/base")})}," 详情 "),k("a",{class:"t-button-link",onClick:a=>{return t=e,u.value=t.rowIndex,void(Y.value=!0);var t}}," 删除 ",8,Q)]),_:1},8,["data","columns","pagination","selected-row-keys","loading","header-affixed-top"])]),_:1}),y(h,{visible:Y.value,"onUpdate:visible":a[2]||(a[2]=e=>Y.value=e),header:"确认删除当前所选合同？",body:m(R),"on-cancel":te,onConfirm:ae},null,8,["visible","body"])])}}})),[["__scopeId","data-v-5f759bd4"]]);export{Y as default};
//# sourceMappingURL=index-1c3862c1.js.map
