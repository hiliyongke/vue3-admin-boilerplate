{"version":3,"file":"index-62fc9cc0.js","sources":["../../../src/assets/icons/assets-empty.svg","../../../src/pages/detail/secondary/index.vue"],"sourcesContent":["import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  width: \"64\",\n  height: \"64\",\n  fill: \"none\",\n  xmlns: \"http://www.w3.org/2000/svg\"\n}\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"path\", {\n  \"fill-rule\": \"evenodd\",\n  \"clip-rule\": \"evenodd\",\n  d: \"m32 10.69 26.248 15.155v22.31L32 63.308 5.75 48.155v-22.31L32 10.69ZM9.75 30.464v15.381L32 58.69l22.248-12.845V30.464L32 43.309 9.75 30.464ZM52.248 27 40.66 33.69l-8.66-5-8.66 5L11.75 27 32 15.31 52.248 27ZM27.34 36 32 38.69 36.66 36 32 33.31 27.34 36ZM30 8V0h4v8h-4ZM44.268 10.751l4-6.928 3.464 2-4 6.928-3.464-2ZM16.268 12.751l-4-6.928 3.464-2 4 6.928-3.464 2Z\",\n  fill: \"currentcolor\",\n  \"fill-opacity\": \".26\"\n}, null, -1 /* HOISTED */)\nconst _hoisted_3 = [\n  _hoisted_2\n]\n\nexport function render(_ctx, _cache) {\n  return (_openBlock(), _createElementBlock(\"svg\", _hoisted_1, _hoisted_3))\n}\nexport default { render: render }","<template>\n  <div>\n    <div class=\"secondary-notification\">\n      <t-tabs v-model=\"tabValue\">\n        <t-tab-panel\n          v-for=\"(tab, tabIndex) in TAB_LIST\"\n          :key=\"tabIndex\"\n          :value=\"tab.value\"\n          :label=\"tab.label\"\n        >\n          <t-list\n            v-if=\"msgDataList.length > 0\"\n            class=\"secondary-msg-list\"\n            :split=\"true\"\n          >\n            <t-list-item\n              v-for=\"(item, index) in msgDataList\"\n              :key=\"index\"\n            >\n              <p\n                :class=\"['content', { unread: item.status }]\"\n                @click=\"setReadStatus(item)\"\n              >\n                <t-tag\n                  size=\"small\"\n                  :theme=\"NOTIFICATION_TYPES[item.quality]\"\n                  variant=\"light\"\n                >\n                  {{ item.type }}\n                </t-tag>\n                {{ item.content }}\n              </p>\n              <template #action>\n                <span class=\"msg-date\">{{ item.date }}</span>\n\n                <div class=\"msg-action\">\n                  <t-tooltip\n                    class=\"set-read-icon\"\n                    :overlay-style=\"{ margin: '6px' }\"\n                    :content=\"item.status ? '设为已读' : '设为未读'\"\n                  >\n                    <span\n                      class=\"msg-action-icon\"\n                      @click=\"setReadStatus(item)\"\n                    >\n                      <t-icon\n                        v-if=\"!!item.status\"\n                        name=\"queue\"\n                        size=\"16px\"\n                      />\n                      <t-icon\n                        v-else\n                        name=\"chat\"\n                      />\n                    </span>\n                  </t-tooltip>\n                  <t-tooltip\n                    content=\"删除通知\"\n                    :overlay-style=\"{ margin: '6px' }\"\n                  >\n                    <span @click=\"handleClickDeleteBtn(item)\">\n                      <t-icon\n                        name=\"delete\"\n                        size=\"16px\"\n                      />\n                    </span>\n                  </t-tooltip>\n                </div>\n              </template>\n            </t-list-item>\n          </t-list>\n          <div\n            v-else\n            class=\"secondary-msg-list__empty-list\"\n          >\n            <empty-icon />\n            <p>暂无通知</p>\n          </div>\n        </t-tab-panel>\n      </t-tabs>\n    </div>\n    <t-dialog\n      v-model:visible=\"visible\"\n      header=\"删除通知\"\n      :body=\"`确认删除通知：${selectedItem && selectedItem.content}吗？`\"\n      :on-confirm=\"deleteMsg\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\nexport default {\n  name: 'DetailSecondary'\n};\n</script>\n\n<script setup lang=\"ts\">\nimport { storeToRefs } from 'pinia';\nimport { NOTIFICATION_TYPES } from '@/enums';\nimport { NotificationItem } from '@/interface';\nimport EmptyIcon from '@/assets/icons/assets-empty.svg';\nimport { useNotificationStore } from '@/store';\n\nconst TAB_LIST = [\n  {\n    label: '全部通知',\n    value: 'msgData'\n  },\n  {\n    label: '未读通知',\n    value: 'unreadMsg'\n  },\n  {\n    label: '已读通知',\n    value: 'readMsg'\n  }\n];\n\nconst tabValue = ref('msgData');\n\nconst visible = ref(false);\nconst selectedItem = ref<NotificationItem>();\n\nconst store = useNotificationStore();\nconst { msgData, unreadMsg, readMsg } = storeToRefs(store);\n\nconst msgDataList = computed(() => {\n  if (tabValue.value === 'msgData') return msgData.value;\n  if (tabValue.value === 'unreadMsg') return unreadMsg.value;\n  if (tabValue.value === 'readMsg') return readMsg.value;\n  return [];\n});\n\nconst handleClickDeleteBtn = (item: NotificationItem) => {\n  visible.value = true;\n  selectedItem.value = item;\n};\n\nconst setReadStatus = (item: NotificationItem) => {\n  const changeMsg = msgData.value;\n  changeMsg.forEach((e: NotificationItem) => {\n    if (e.id === item.id) {\n      if (e.status) e.status = false;\n    }\n  });\n  store.setMsgData(changeMsg);\n};\n\nconst deleteMsg = () => {\n  const item = selectedItem.value;\n  const changeMsg = msgData.value;\n  changeMsg.forEach((e: NotificationItem, index: number) => {\n    if (e.id === item?.id) {\n      changeMsg.splice(index, 1);\n    }\n  });\n  visible.value = false;\n  store.setMsgData(changeMsg);\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import url('./index.less');\n</style>\n"],"names":["_hoisted_1","width","height","fill","xmlns","_hoisted_3","fill-rule","clip-rule","d","fill-opacity","EmptyIcon","render","_ctx","_cache","_openBlock","_createElementBlock","name","TAB_LIST","label","value","tabValue","ref","visible","selectedItem","store","useNotificationStore","msgData","unreadMsg","readMsg","storeToRefs","msgDataList","computed","setReadStatus","item","changeMsg","forEach","e","id","status","setMsgData","deleteMsg","index","splice"],"mappings":"2kBAEA,MAAMA,EAAa,CACjBC,MAAO,KACPC,OAAQ,KACRC,KAAM,OACNC,MAAO,8BASHC,EAAa,GAPiC,OAAQ,CAC1DC,YAAa,UACbC,YAAa,UACbC,EAAG,6WACHL,KAAM,eACNM,eAAgB,OACf,MAAuB,IAQ1B,MAAeC,EAAA,CAAEC,OAHV,SAAgBC,EAAMC,GAC3B,OAAQC,IAAcC,EAAoB,MAAOf,EAAYK,oYCuE/D,CAAeW,KAAA,8BAYf,MAAAC,EAAA,CAAiB,CACfC,MAAA,OACSC,MAAA,WAET,CACAD,MAAA,OACSC,MAAA,aAET,CACAD,MAAA,OACSC,MAAA,YAKXC,EAAAC,EAAA,WAEAC,EAAAD,GAAA,GACAE,EAAAF,IAEAG,EAAAC,KACAC,QAAAA,EAAAC,UAAAA,EAAAC,QAAAA,GAAAC,EAAAL,GAEAM,EAAAC,EAAA,IACE,YAAAX,EAAAD,MAAkCO,EAAAP,MAClC,cAAAC,EAAAD,MAAoCQ,EAAAR,MACpC,YAAAC,EAAAD,MAAkCS,EAAAT,MAClC,IAQFa,EAAAC,IACE,MAAAC,EAAAR,EAAAP,MACAe,EAAAC,QAAAC,IACEA,EAAAC,KAAAJ,EAAAI,IACED,EAAAE,SAAcF,EAAAE,QAAA,KAGlBd,EAAAe,WAAAL,IAGFM,EAAA,KACE,MAAAP,EAAAV,EAAAJ,MACAe,EAAAR,EAAAP,MACAe,EAAAC,QAAA,CAAAC,EAAAK,KACEL,EAAAC,MAAA,MAAAJ,OAAA,EAAAA,EAAAI,KACEH,EAAAQ,OAAAD,EAAA,KAGJnB,EAAAH,OAAA,EACAK,EAAAe,WAAAL,2yBAxBF,CAAAD,IACEX,EAAAH,OAAA,EACAI,EAAAJ,MAAAc"}