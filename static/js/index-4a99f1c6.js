var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,n=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,s=(e,t)=>{for(var a in t||(t={}))o.call(t,a)&&n(e,a,t[a]);if(l)for(var a of l(t))i.call(t,a)&&n(e,a,t[a]);return e},r=(e,l)=>t(e,a(l));import{b as c}from"./user-292cfcac.js";import{g as d,a as p,b as u,c as m}from"./charts-5d1866fd.js";import{r as y,p as v}from"./index-fc62c5a3.js";import{d as b,bM as h,k as g,g as f,h as x,bN as w,i as k,L as _,c as C,l as S,x as L,u as O,am as j,bO as P,bP as z,bQ as I,bR as T,bS as W,bT as D,bU as N,bV as A,bG as E,a2 as G,a9 as H,o as K,e as V,a as B,t as M,m as U,s as F,y as J,F as Q,r as R,Y,ao as q,ap as X,bJ as Z,H as $,bL as ee,p as te,b as ae}from"./.pnpm-baced213.js";import{_ as le}from"./_plugin-vue_export-helper-1b428a4d.js";import"./index-1bd30a01.js";function oe({dateTime:e=[],placeholderColor:t,borderColor:a}){let l=["00:00","02:00","04:00","06:00"];if(e.length>0){l=d(e,7)}return{color:p(),tooltip:{trigger:"item"},grid:{top:"10px",left:"0",right:"20px",bottom:"36px",containLabel:!0},xAxis:{type:"category",data:l,boundaryGap:!1,axisLabel:{color:t},axisLine:{lineStyle:{color:a,width:1}}},yAxis:{type:"value",axisLabel:{color:t},splitLine:{lineStyle:{color:a}}},legend:{data:["本月","上月"],icon:"circle",bottom:"0",itemGap:48,itemHeight:8,itemWidth:8,textStyle:{fontSize:12,color:t}},series:[{name:"上月",data:[u(),u(),u(),u(),u(),u(),u()],type:"line",smooth:!0,color:p()[0],showSymbol:!0,symbol:"circle",symbolSize:8},{name:"本月",data:[u(),u(),u(),u(),u(),u(),u()],type:"line",smooth:!0,showSymbol:!0,symbol:"circle",symbolSize:8,color:p()[1]}]}}const ie=[100,120,140,160,180,200,210];function ne({isMonth:e=!1,placeholderColor:t,borderColor:a}){let l=ie.concat([]),o=ie.concat([]);return e&&(l=l.reverse(),o=o.reverse()),{color:p(),tooltip:{trigger:"item"},grid:{top:"10px",left:"0",right:"0",bottom:"36px",containLabel:!0},xAxis:[{type:"category",data:["周一","周二","周三","周四","周五","周六","周日"],axisTick:{alignWithLabel:!0},axisLabel:{color:t},axisLine:{lineStyle:{color:a,width:1}}}],yAxis:[{type:"value",axisLabel:{color:t},splitLine:{lineStyle:{color:a}}}],legend:{data:["去年","今年"],bottom:"0",icon:"rect",itemGap:48,itemHeight:4,itemWidth:12,textStyle:{fontSize:12,color:t}},series:[{name:"去年",type:"bar",barWidth:"30%",data:l},{name:"今年",type:"bar",barWidth:"30%",data:o}]}}const se=[{name:"集群名",value:"helloworld",type:null},{name:"集群ID",value:"cls - 2ntelvxw",type:{key:"color",value:"blue"}},{name:"状态",value:"运行中",type:{key:"color",value:"green"}},{name:"K8S版本",value:"1.7.8",type:null},{name:"配置",value:"6.73 核 10.30 GB",type:null},{name:"所在地域",value:"广州",type:null},{name:"新增资源所属项目",value:"默认项目",type:null},{name:"节点数量",value:"4 个",type:null},{name:"节点网络",value:"vpc - 5frmkm1x",type:{key:"color",value:"blue"}},{name:"容器网络",value:"172.16.0.0 / 16",type:null},{name:"集群凭证",value:"显示凭证",type:{key:"color",value:"blue"}},{name:"创建/更新",value:"2018-05-31 22:11:44 2018-05-31 22:11:44",type:{key:"contractAnnex",value:"pdf"}},{name:"描述",value:"istio_test",type:null}],re=[{width:"448",ellipsis:!0,colKey:"name",title:"项目名称",sorter:(e,t)=>e.name.substr(10)-t.name.substr(10)},{width:"448",ellipsis:!0,colKey:"adminName",title:"管理员"},{width:"448",className:"test",ellipsis:!0,colKey:"updateTime",title:"创建时间",sorter:(e,t)=>Date.parse(e.updateTime)-Date.parse(t.updateTime)},{align:"left",width:"200",className:"test2",ellipsis:!0,colKey:"op",fixed:"right",title:"操作"}],ce=e=>(te("data-v-4ec1ec8b"),e=e(),ae(),e),de={class:"detail-deploy"},pe=ce(()=>B("div",{class:"deploy-panel-left"},[B("div",{id:"monitorContainer",style:{width:"100%",height:"265px"}})],-1)),ue=ce(()=>B("div",{id:"dataContainer",style:{width:"100%",height:"265px"}},null,-1)),me=["onClick"],ye={class:"dialog-info-block"},ve={class:"dialog-info-block"},be=le(b(r(s({},{name:"DetailDeploy"}),{setup(e){h([P,z,I,T,W,D,N,A]);const t=c(),a=g(()=>t.chartColors),l=f([]),o=f({defaultPageSize:10,total:100,defaultCurrent:1}),i=()=>{return e=this,t=null,a=function*(){try{const e=yield y.get("/api/get-project-list");if(0===e.code){const{list:t=[]}=e.data;l.value=t,o.value=r(s({},o.value),{total:t.length})}}catch(e){}},new Promise((l,o)=>{var i=e=>{try{s(a.next(e))}catch(t){o(t)}},n=e=>{try{s(a.throw(e))}catch(t){o(t)}},s=e=>e.done?l(e.value):Promise.resolve(e.value).then(i,n);s((a=a.apply(e,t)).next())});var e,t,a},n=f(!1);let d,p,u,b;x(()=>{d=document.getElementById("monitorContainer"),p=w(d),p.setOption(oe(s({},a.value))),setInterval(()=>{p.setOption(oe(s({},a.value)))},3e3)}),x(()=>{u=document.getElementById("dataContainer"),b=w(u),b.setOption(ne(s({},a.value)))});const te=()=>{p.resize({width:d.clientWidth,height:d.clientHeight}),b.resize({width:u.clientWidth,height:u.clientHeight})};k(()=>{window.removeEventListener("resize",te),clearInterval(null)});const ae=()=>{b.setOption(ne(s({},a.value)))};x(()=>{i(),window.addEventListener("resize",te,!1)}),_(()=>t.brandTheme,()=>{m([p,b])});const le=e=>{},ie=(e,t)=>{},ce=()=>{n.value=!1};return(e,t)=>{const a=E,i=Y,s=q,r=X,c=G,d=Z,p=$,u=ee,m=H;return K(),C("div",de,[S(c,{gutter:16},{default:L(()=>[S(i,{lg:6,xs:12},{default:L(()=>[S(a,{title:"部署趋势"},{default:L(()=>[pe]),_:1})]),_:1}),S(i,{lg:6,xs:12},{default:L(()=>[S(a,{title:"告警情况"},{option:L(()=>[S(r,{"default-value":"dateVal",onChange:ae},{default:L(()=>[S(s,{value:"dateVal"},{default:L(()=>[V("本周")]),_:1}),S(s,{value:"monthVal"},{default:L(()=>[V("本月")]),_:1})]),_:1})]),default:L(()=>[ue]),_:1})]),_:1})]),_:1}),S(a,{title:"项目列表",class:"container-base-margin-top"},{default:L(()=>[S(u,{columns:O(re),data:O(l),pagination:O(o),hover:!0,"row-key":"index",onSortChange:le,onChange:ie},{adminName:L(({row:e})=>[B("span",null,[V(M(e.adminName)+" ",1),e.adminPhone?(K(),U(d,{key:0,size:"small"},{default:L(()=>[V(M(e.adminPhone),1)]),_:2},1024)):F("",!0)])]),op:L(e=>[B("a",{class:J(O(v)+"-link"),onClick:t[0]||(t[0]=e=>{n.value=!0})}," 管理 ",2),B("a",{class:J(O(v)+"-link"),onClick:t=>{return a=e,void l.value.splice(a.rowIndex,1);var a}}," 删除 ",10,me)]),"op-column":L(()=>[S(p,{name:"descending-order"})]),_:1},8,["columns","data","pagination"])]),_:1}),S(m,{visible:O(n),"onUpdate:visible":t[1]||(t[1]=e=>j(n)?n.value=e:null),header:"基本信息",onConfirm:ce},{body:L(()=>[B("div",ye,[B("div",ve,[(K(!0),C(Q,null,R(O(se),(e,t)=>(K(),C("div",{key:t,class:"info-item"},[B("h1",null,M(e.name),1),B("span",{class:J({green:e.type&&"green"===e.type.value,blue:e.type&&"blue"===e.type.value})},M(e.value),3)]))),128))])])]),_:1},8,["visible"])])}}})),[["__scopeId","data-v-4ec1ec8b"]]);export{be as default};
//# sourceMappingURL=index-4a99f1c6.js.map
